    
        I have a generics class Foo&lt;T&gt;. In a method of Foo, i want to get the class instance of type T. But i just can't call T.class

Please tell me your preferred way to get around with the T.class ?

                
    
        There have been <a href="http://stackoverflow.com/questions/4762573/should-embeddable-jpa-class-implement-equals-and-hashcode">some <a href="http://stackoverflow.com/questions/3147166/how-to-implement-equals-and-hashcode-methods-in-baseentity-of-jpa">discussions here about JPA entities and which hashCode() / equals() implementation should be used for JPA entity classes.
Most of them if not all depend on Hibernate, but I'd like to discuss them JPA-implementation neutral (I am using EclipseLink btw)

All possible implementations are having their own advantages and disadvantages regarding:


hashCode()/equals() contract conformity (immutability) for List/Set operations
If identical objects (e.g. from different sessions, dynamic proxies from lazy loaded data structures) can be detected
If entities behave correctly in detached (or non-persisted) state 



As far I can see, there are three options: 


Do not override them and rely on Object.equals() and Object.hashCode()

hashCode()/equals() works
cannot identify identical objects, problems with dynamic proxies
no problems with detached entities

Override them, based on the primary key

hashCode()/equals() broken
correct identity (for all managed entities)
problems with detached entities

Override them, based on the Business-Id (non-primary key fields - what about foreign keys?)

hashCode()/equals() broken
correct identity (for all managed entities)
No problems with detached entities



My questions are:


Did I miss an option and/or pro/contra point?
What option did you choose and why?



UPDATE:

hashCode()/equals() broken means that hashCode() may return a different value from one invocation to another which is (when correctly implemented) not broken in the sense of the Object API documentation
but causes problems when trying to retrieve a changed entity from a Map,  Set or other hash-based Collections.

With the consequence that JPA implementations (at least EclipseLink) will not work correctly in some cases.

UPDATE 2:

Thank you for all answers, most of them with remarkable quality.
Unfortuntely, I am still unsure which approach will be the best for real life application or at least or how determine the best approach for my application.
Because of this, I'll keep the question open and hope for some more discussions and/or opinions.

                
    
        I generated a web-service client using JBoss utils (JAX-WS compatible)
using Eclipse 'web service client from a wsdl'.

So, the only thing I provided was a url to a web-service WSDL.

Now, the web service provider tells me to change the "url of client endpoint application access" of the web-service.

What is it and how to change it?

                
    
        I can't understand where the final keyword is REALLY handy when it is used on method parameters.  

If we exclude the usage of anonymous classes, readability and intent declaration then it seems almost worthless to me. 

Enforcing that some data remains constant is not as strong as it seems. 

A) If the parameter is a primitive then it will have no effect since the parameter is passed to the method as a value and changing it will have no effect outside the scope. 

B) If we are passing a parameter by reference, then the reference itself is a local variable and if the reference is changed from within the method, that would not have any effect from outside of the method scope. 

Consider the simple test example below.
This test passes although the method changed the value of the reference given to it, it has no effect.

public void testNullify(){

	Collection&lt;Integer&gt; c  = new ArrayList&lt;Integer&gt;();		
	nullify(c);
	assertNotNull(c);		
	final Collection&lt;Integer&gt; c1 = c;
	assertTrue(c1.equals(c));
	change(c);
	assertTrue(c1.equals(c));
}


private void change(Collection&lt;Integer&gt; c) {
	c = new ArrayList&lt;Integer&gt;();		
}


public void nullify(Collection&lt;?&gt; t){
	t = null;		
}


                
    
        please give me a sample code for read/write text file in blackberry application.

                
    
        I have a string something like |serialNo|checkDelta?|checkFuture?|checkThis?|.

Now i am using the following code to split the string.

String[] splitString = str.split("|");

but when i use this i get array of string that contains each and every alphabet, whereas i need string which contains letter like serialNo, checkDelta?, checkFuture?, checkthis?.

How to get these? Am i missing some thing?

Thanks

                
    
        I am working with a legacy system that has an anemic domain model.

The domain has the following entity classses: Car, CarType, CarComponent, CarComponentType.

For each of these, there is a separate repository. There is also a number of services that access these repositories and contain basically all logic.

I need to implement a method that determines if a CarComponentType can be discontinued by the vendor. The logic is as follows: a component can be discontinued only if there are no existing cars with that component today.

Initially, I implemented this in a service class.

public boolean canBeDiscontinued(CarComponentType carComponentType) {
    List&lt;Car&gt; cars = carRepository.getCarsWithComponent(carComponentType);
    return cars.isEmpty();
}


This works - but this logic is used from several other places in the code. It might grow, and it looks like something that could fit inside the CarComponentType class instead:

public boolean canBeDiscontinued() {
    List&lt;Car&gt; cars = carRepository.getCarsWithComponent(this);
    return cars.isEmpty();   
}


However, I can't put it there, since it needs to access the repository (and as I understand it is a very serious antipattern for entities to be aware of the data access layer). When loading a component type I can't load all cars of that type since that could be thousands of objects. We are not using any ORM, so making a lazy loaded collection for not only be bulky but also very error-prone.

Is it more appropriate to actually have this method in a service class as I first did? Is it not important? Is there another alternative? Should I start refactoring from another starting point?

There is a similar question <a href="http://stackoverflow.com/questions/596285/in-domain-driven-design-would-it-be-a-violation-of-ddd-to-put-calls-to-other-obj">here. But my question relates to Java, so I don't think that solution is applicable in my case. Also, sorry in advance for using cars and components as my domain model. :)

                
    
        I'm working on a tiny web library and wonder wheter I should call the HTTP handler methods for GET, POST, PUT etc. reflectivly or not.

Fixed Methods

First the variant with an if else ... block calling methods given in the base class where they have a default implementation returning an error to the client. Since a request to an unsupported method needs a header with the allowed methods, I need to look up reflectivly what methods are actully overriden (like the Servlet API does, by the way).  

public abstract class Resource {

    public Response handle(HttpServletRequest request) {
        String action = request.getMethod();
        if(action.equals("GET"))
            return get(request);
        else if(action.equals("POST"))
            return post(request);
        ...
    }

    protected Response get(HttpServletRequest request) {
        return new Response(METHOD_NOT_ALLOWED);
    }

    protected Response post(HttpServletRequest request) {
        return new Response(METHOD_NOT_ALLOWED);
    }

}


The disadvantage of this solution is the reduced flexible, since the usable methods are fixed in the base class until the handle methods gets reimplemented in a subclass.

Variable Methods

The other variant is to look up HTTP handler methods reflectivly depending on their signature (take HttpServletRequest and return Response). These methods would be stored in a Map and called reflectivly depending on the key in the map.

public abstract class Resource {

    private Map&lt;String, Method&gt; handlers;

    public Resource() {
        handlers = findHttpHandlerMethodsReflectivly();
    }

    public Response handle(HttpServletRequest request) {
        String action = request.getMethod();
        Method handler = handlers.get(action);
        return (Response)handler.invoke(this, request);
    }

}


The advantage of this solution is the simple implementation and flexibilty, but the disadvantages are perhaps a bit more runtime overhead due to the search in the map and the reflective method call. And the interface of the class is somewhat "soft" (or dynamic) and the compiler has no chance to check it. But I'm not sure if this would be a disadvantage since no other classes should rely on the HTTP handler methods, they are the external web interface and the border of the Java system.

Strategy Pattern

The third option and the cleanest OOP would be the strategy pattern as recommend by "polygenelubricants". It would look like this:

class MyResource extends Resource {

    register("GET", 
        new RequestHandler{
            @Override Response handle(HttpServletRequest request) {
                new Response(OK);
            }
        }
    );

}


It is clean OOP but the code is realy ugly and verbose. I would prefer Scala with closures here even though the tool support for Scala is still poor. Compare this to the solution with inheritance and fixed methods:

class MyResource extends Resource {

    @Override Response get(HttpServletRequest request) {
        return new Resonse(OK);
    }

}


What would you prefer and why? Other ideas?

Solution

I've learned that reflection is not needed here due to the fixed set of HTTP methods. The approach with the strategy pattern is clean, but it looks to verbose to me. So I decided to go with the fixed methods and inheritance.

                
    
        Let's assume I have a table with field of type VARCHAR. And I need to get data from that table sorted alphabetically by that field. 

What is the best way (for performance): add order by field to the SQL-query or sort the data when it's already fetched?

I'm using Java (with Hibernate), but I can't tell anything about DB engine. It could be any popular relational database (like MySQL or MS Sql Server or Oracle or HSQL DB or any other).

The amount of records in table can vary greatly but let's assume there are 5k records.

UPD: how well does 2nd level hibernate cache (EHCache for example) support sorted data?

                
    
        I have a StringBuilder object that needs to be trimmed (i.e. all whitespace chars /u0020 and below removed from either end).

I can't seem to find a method in string builder that would do this.

Here's what I'm doing now:

String trimmedStr = strBuilder.toString().trim();


This gives exactly the desired output, but it requires two Strings to be allocated instead of one.  Is there a more efficient to trim the string while it's still in the StringBuilder?

                
    
        At the moment we use <a href="http://www.hsqldb.org/" rel="nofollow">HSQLDB as an embedded database, but we search for a database with less memory footprint as the data volume grows.

<a href="http://developers.sun.com/javadb/" rel="nofollow">Derby / JavaDB is not an option at the moment because it stores properties globally in the system properties. So we thought of <a href="http://www.h2database.com/html/main.html" rel="nofollow">h2.

While we used HSQLDB we created a Server-object, set the parameters and started it. This is described <a href="http://hsqldb.org/doc/guide/ch04.html#N10BBC" rel="nofollow">here (and given as example in the class org.hsqldb.test.TestBase).

The question is: Can this be done analogous with the h2 database, too? Do you have any code samples for that? Scanning the h2-page, I did not find an example.

                
    
        I tried searching in Google, but I could not find any good examples where a username and password are checked with a database for authentication purposes.

In further simple words, how can I create a simple login form using Spring and Hibernate where the credentials are checked with the database.

Update

Cam anyone come up with a simple example where I can see how the flow goes and how the input data is passed to hibernate?

                
    
        My question is about order of execution guarantees in C# (and presumably .Net in general). I give Java examples I know something about to compare with.

For Java (from "Java Concurrency in Practice")


  There is no guarantee that operations in one thread will be performed in the order given by the program, as long as the reordering is not detectable from within that thread-even if the reordering is apparent to other threads.


So the code 

  y = 10;
  x = 5;
  a = b + 10;


may actually assign a=b+10 Before assigning y = 10

And in Java (from the same book)


  Everything thread A does in or prior to a synchronized block is visible to thread B when it starts a synchronized block guarded by the same lock.


so in Java

 y = 10;
 synchronized(lockObject) {
     x = 5;
 }
 a = b + 10;


y = 10 and x = 5 are guaranteed to both run before a = b + 10 (I don't know whether y = 10 is guaranteed to run before x = 5).

What guarantees does C# code make for the order of execution for the C# statements

 y = 10;
 lock(lockObject) {
     x = 5;
 }
 a = b + 10;


I am particularly interested in an answer that can provide a definitive reference or some other really meaningful justification as guarantees like this are hard to test because they are about what the compiler is allowed to do, not what it does every time and because when they fail you are going to have very hard to reproduce intermittent bugs when threads hit things in just the wrong order.

                
    
        If I have two variables:

Object obj;
String methodName = "getName";


Without knowing the class of obj, how can I call the method identified by methodName on it?<br />
The method being called has no parameters, and a String return value - a getter for a Java bean.

                
    
        What is the meaning of the Java warning "Type safety: The cast from Object to List is actually checking against the erased type List"?  I get it when I try to cast an Object to a type with generic information, such as in the following code:

Object object = getMyList();List&lt;Integer&gt; list = (List&lt;Integer&gt;) object;
                
    
        I got an integer: 1695609641

when I use method: 

String hex = Integer.toHexString(1695609641);
system.out.println(hex); 


gives:

6510f329


but I want a byte array:

byte[] bytearray = new byte[] { (byte) 0x65, (byte)0x10, (byte)0xf3, (byte)0x29};


how can i make this?? :D

thnx!

                
    
        FileBro is a basic GUI based File Browser. 

<img src="http://i.stack.imgur.com/yswnE.png" width="677" height="398">

FileBro Functionality


Directory tree - shows the file system roots at start-up, but is otherwise built lazily as the user browses around the file system.  FileBro displays a progress bar as it is loading new entries.
The file list (a table) displays a list of the directories and files in the current directory tree selection.  Sort by clicking on the column header.
Buttons - all use the Desktop class for their functionality.  If the action cannot be completed, a meaningful reason should by displayed in a JEditorPane error message.

Locate - opens the parent directory of the currently selected file. 
Open - launches whatever application is the default 'consumer' for that file type.
Edit - opens the file for edit in the default consumer.
Print - prints the file using the default consumer.

Details on the selected file are displayed below the buttons.




Does the current functionality work as per above description?

FileBrowser.java

import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.Desktop;
import java.awt.Dimension;
import java.awt.Container;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.*;
import java.awt.image.*;

import javax.swing.*;
import javax.swing.border.*;
import javax.swing.event.*;
import javax.swing.tree.*;
import javax.swing.table.*;
import javax.swing.filechooser.FileSystemView;

import javax.imageio.ImageIO;

import java.util.Date;
import java.util.List;
import java.util.ArrayList;

import java.io.*;
import java.nio.channels.FileChannel;

import java.net.URL;

/**
A basic File Browser.  Requires 1.6+ for the Desktop &amp; SwingWorker
classes, amongst other minor things.

Includes support classes FileTableModel &amp; FileTreeCellRenderer.

@TODO Bugs
&lt;li&gt;Fix keyboard focus issues - especially when functions like
rename/delete etc. are called that update nodes &amp; file lists.
&lt;li&gt;Needs more testing in general.

@TODO Functionality
&lt;li&gt;Double clicking a directory in the table, should update the tree
&lt;li&gt;Move progress bar?
&lt;li&gt;Add other file display modes (besides table) in CardLayout?
&lt;li&gt;Menus + other cruft?
&lt;li&gt;Implement history/back
&lt;li&gt;Allow multiple selection
&lt;li&gt;Add file search

@author Andrew Thompson
@version 2011-06-08
@see http://stackoverflow.com/questions/6182110
@license LGPL
*/
class FileBrowser {

    /** Title of the application */
    public static final String APP_TITLE = "FileBro";
    /** Used to open/edit/print files. */
    private Desktop desktop;
    /** Provides nice icons and names for files. */
    private FileSystemView fileSystemView;

    /** currently selected File. */
    private File currentFile;

    /** Main GUI container */
    private JPanel gui;

    /** File-system tree. Built Lazily */
    private JTree tree;
    private DefaultTreeModel treeModel;

    /** Directory listing */
    private JTable table;
    private JProgressBar progressBar;
    /** Table model for File[]. */
    private FileTableModel fileTableModel;
    private ListSelectionListener listSelectionListener;
    private boolean cellSizesSet = false;
    private int rowIconPadding = 6;

    /* File controls. */
    private JButton openFile;
    private JButton printFile;
    private JButton editFile;

    /* File details. */
    private JLabel fileName;
    private JTextField path;
    private JLabel date;
    private JLabel size;
    private JCheckBox readable;
    private JCheckBox writable;
    private JCheckBox executable;
    private JRadioButton isDirectory;
    private JRadioButton isFile;

    /* GUI options/containers for new File/Directory creation.  Created lazily. */
    private JPanel newFilePanel;
    private JRadioButton newTypeFile;
    private JTextField name;

    public Container getGui() {
        if (gui==null) {
            gui = new JPanel(new BorderLayout(3,3));
            gui.setBorder(new EmptyBorder(5,5,5,5));

            fileSystemView = FileSystemView.getFileSystemView();
            desktop = Desktop.getDesktop();

            JPanel detailView = new JPanel(new BorderLayout(3,3));

            table = new JTable();
            table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
            table.setAutoCreateRowSorter(true);
            table.setShowVerticalLines(false);

            listSelectionListener = new ListSelectionListener() {
                @Override
                public void valueChanged(ListSelectionEvent lse) {
                    int row = table.getSelectionModel().getLeadSelectionIndex();
                    setFileDetails( ((FileTableModel)table.getModel()).getFile(row) );
                }
            };
            table.getSelectionModel().addListSelectionListener(listSelectionListener);
            JScrollPane tableScroll = new JScrollPane(table);
            Dimension d = tableScroll.getPreferredSize();
            tableScroll.setPreferredSize(new Dimension((int)d.getWidth(), (int)d.getHeight()/2));
            detailView.add(tableScroll, BorderLayout.CENTER);

            // the File tree
            DefaultMutableTreeNode root = new DefaultMutableTreeNode();
            treeModel = new DefaultTreeModel(root);

            TreeSelectionListener treeSelectionListener = new TreeSelectionListener() {
                public void valueChanged(TreeSelectionEvent tse){
                    DefaultMutableTreeNode node =
                        (DefaultMutableTreeNode)tse.getPath().getLastPathComponent();
                    showChildren(node);
                    setFileDetails((File)node.getUserObject());
                }
            };

            // show the file system roots.
            File[] roots = fileSystemView.getRoots();
            for (File fileSystemRoot : roots) {
                DefaultMutableTreeNode node = new DefaultMutableTreeNode(fileSystemRoot);
                root.add( node );
                File[] files = fileSystemView.getFiles(fileSystemRoot, true);
                for (File file : files) {
                    if (file.isDirectory()) {
                        node.add(new DefaultMutableTreeNode(file));
                    }
                }
                //
            }

            tree = new JTree(treeModel);
            tree.setRootVisible(false);
            tree.addTreeSelectionListener(treeSelectionListener);
            tree.setCellRenderer(new FileTreeCellRenderer());
            tree.expandRow(0);
            JScrollPane treeScroll = new JScrollPane(tree);

            // as per trashgod tip
            tree.setVisibleRowCount(15);

            Dimension preferredSize = treeScroll.getPreferredSize();
            Dimension widePreferred = new Dimension(
                200,
                (int)preferredSize.getHeight());
            treeScroll.setPreferredSize( widePreferred );

            // details for a File
            JPanel fileMainDetails = new JPanel(new BorderLayout(4,2));
            fileMainDetails.setBorder(new EmptyBorder(0,6,0,6));

            JPanel fileDetailsLabels = new JPanel(new GridLayout(0,1,2,2));
            fileMainDetails.add(fileDetailsLabels, BorderLayout.WEST);

            JPanel fileDetailsValues = new JPanel(new GridLayout(0,1,2,2));
            fileMainDetails.add(fileDetailsValues, BorderLayout.CENTER);

            fileDetailsLabels.add(new JLabel("File", JLabel.TRAILING));
            fileName = new JLabel();
            fileDetailsValues.add(fileName);
            fileDetailsLabels.add(new JLabel("Path/name", JLabel.TRAILING));
            path = new JTextField(5);
            path.setEditable(false);
            fileDetailsValues.add(path);
            fileDetailsLabels.add(new JLabel("Last Modified", JLabel.TRAILING));
            date = new JLabel();
            fileDetailsValues.add(date);
            fileDetailsLabels.add(new JLabel("File size", JLabel.TRAILING));
            size = new JLabel();
            fileDetailsValues.add(size);
            fileDetailsLabels.add(new JLabel("Type", JLabel.TRAILING));

            JPanel flags = new JPanel(new FlowLayout(FlowLayout.LEADING,4,0));

            isDirectory = new JRadioButton("Directory");
            flags.add(isDirectory);

            isFile = new JRadioButton("File");
            flags.add(isFile);
            fileDetailsValues.add(flags);

            JToolBar toolBar = new JToolBar();
            // mnemonics stop working in a floated toolbar
            toolBar.setFloatable(false);

            JButton locateFile = new JButton("Locate");
            locateFile.setMnemonic('l');

            locateFile.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent ae) {
                    try {
                        System.out.println("Locate: " + currentFile.getParentFile());
                        desktop.open(currentFile.getParentFile());
                    } catch(Throwable t) {
                        showThrowable(t);
                    }
                    gui.repaint();
                }
            });
            toolBar.add(locateFile);

            openFile = new JButton("Open");
            openFile.setMnemonic('o');

            openFile.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent ae) {
                    try {
                        System.out.println("Open: " + currentFile);
                        desktop.open(currentFile);
                    } catch(Throwable t) {
                        showThrowable(t);
                    }
                    gui.repaint();
                }
            });
            toolBar.add(openFile);

            editFile = new JButton("Edit");
            editFile.setMnemonic('e');
            editFile.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent ae) {
                    try {
                        desktop.edit(currentFile);
                    } catch(Throwable t) {
                        showThrowable(t);
                    }
                }
            });
            toolBar.add(editFile);

            printFile = new JButton("Print");
            printFile.setMnemonic('p');
            printFile.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent ae) {
                    try {
                        desktop.print(currentFile);
                    } catch(Throwable t) {
                        showThrowable(t);
                    }
                }
            });
            toolBar.add(printFile);

            // Check the actions are supported on this platform!
            openFile.setEnabled(desktop.isSupported(Desktop.Action.OPEN));
            editFile.setEnabled(desktop.isSupported(Desktop.Action.EDIT));
            printFile.setEnabled(desktop.isSupported(Desktop.Action.PRINT));

            flags.add(new JLabel("::  Flags"));
            readable = new JCheckBox("Read  ");
            readable.setMnemonic('a');
            flags.add(readable);

            writable = new JCheckBox("Write  ");
            writable.setMnemonic('w');
            flags.add(writable);

            executable = new JCheckBox("Execute");
            executable.setMnemonic('x');
            flags.add(executable);

            int count = fileDetailsLabels.getComponentCount();
            for (int ii=0; ii&lt;count; ii++) {
                fileDetailsLabels.getComponent(ii).setEnabled(false);
            }

            count = flags.getComponentCount();
            for (int ii=0; ii&lt;count; ii++) {
                flags.getComponent(ii).setEnabled(false);
            }

            JPanel fileView = new JPanel(new BorderLayout(3,3));

            fileView.add(toolBar,BorderLayout.NORTH);
            fileView.add(fileMainDetails,BorderLayout.CENTER);

            detailView.add(fileView, BorderLayout.SOUTH);

            JSplitPane splitPane = new JSplitPane(
                JSplitPane.HORIZONTAL_SPLIT,
                treeScroll,
                detailView);
            gui.add(splitPane, BorderLayout.CENTER);

            JPanel simpleOutput = new JPanel(new BorderLayout(3,3));
            progressBar = new JProgressBar();
            simpleOutput.add(progressBar, BorderLayout.EAST);
            progressBar.setVisible(false);

            gui.add(simpleOutput, BorderLayout.SOUTH);

        }
        return gui;
    }

    public void showRootFile() {
        // ensure the main files are displayed
        tree.setSelectionInterval(0,0);
    }

    private TreePath findTreePath(File find) {
        for (int ii=0; ii&lt;tree.getRowCount(); ii++) {
            TreePath treePath = tree.getPathForRow(ii);
            Object object = treePath.getLastPathComponent();
            DefaultMutableTreeNode node = (DefaultMutableTreeNode)object;
            File nodeFile = (File)node.getUserObject();

            if (nodeFile==find) {
                return treePath;
            }
        }
        // not found!
        return null;
    }

    private void showErrorMessage(String errorMessage, String errorTitle) {
        JOptionPane.showMessageDialog(
            gui,
            errorMessage,
            errorTitle,
            JOptionPane.ERROR_MESSAGE
            );
    }

    private void showThrowable(Throwable t) {
        t.printStackTrace();
        JOptionPane.showMessageDialog(
            gui,
            t.toString(),
            t.getMessage(),
            JOptionPane.ERROR_MESSAGE
            );
        gui.repaint();
    }

    /** Update the table on the EDT */
    private void setTableData(final File[] files) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                if (fileTableModel==null) {
                    fileTableModel = new FileTableModel();
                    table.setModel(fileTableModel);
                }
                table.getSelectionModel().removeListSelectionListener(listSelectionListener);
                fileTableModel.setFiles(files);
                table.getSelectionModel().addListSelectionListener(listSelectionListener);
                if (!cellSizesSet) {
                    Icon icon = fileSystemView.getSystemIcon(files[0]);

                    // size adjustment to better account for icons
                    table.setRowHeight( icon.getIconHeight()+rowIconPadding );

                    setColumnWidth(0,-1);
                    setColumnWidth(3,60);
                    table.getColumnModel().getColumn(3).setMaxWidth(120);
                    setColumnWidth(4,-1);
                    setColumnWidth(5,-1);
                    setColumnWidth(6,-1);
                    setColumnWidth(7,-1);
                    setColumnWidth(8,-1);
                    setColumnWidth(9,-1);

                    cellSizesSet = true;
                }
            }
        });
    }

    private void setColumnWidth(int column, int width) {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);
        if (width&lt;0) {
            // use the preferred width of the header..
            JLabel label = new JLabel( (String)tableColumn.getHeaderValue() );
            Dimension preferred = label.getPreferredSize();
            // altered 10-&gt;14 as per camickr comment.
            width = (int)preferred.getWidth()+14;
        }
        tableColumn.setPreferredWidth(width);
        tableColumn.setMaxWidth(width);
        tableColumn.setMinWidth(width);
    }

    /** Add the files that are contained within the directory of this node.
    Thanks to Hovercraft Full Of Eels for the SwingWorker fix. */
    private void showChildren(final DefaultMutableTreeNode node) {
        tree.setEnabled(false);
        progressBar.setVisible(true);
        progressBar.setIndeterminate(true);

        SwingWorker&lt;Void, File&gt; worker = new SwingWorker&lt;Void, File&gt;() {
            @Override
            public Void doInBackground() {
                File file = (File) node.getUserObject();
                if (file.isDirectory()) {
                    File[] files = fileSystemView.getFiles(file, true); //!!
                    if (node.isLeaf()) {
                        for (File child : files) {
                            if (child.isDirectory()) {
                                publish(child);
                            }
                        }
                    }
                    setTableData(files);
                }
                return null;
            }

            @Override
            protected void process(List&lt;File&gt; chunks) {
                for (File child : chunks) {
                    node.add(new DefaultMutableTreeNode(child));
                }
            }

            @Override
            protected void done() {
                progressBar.setIndeterminate(false);
                progressBar.setVisible(false);
                tree.setEnabled(true);
            }
        };
        worker.execute();
    }

    /** Update the File details view with the details of this File. */
    private void setFileDetails(File file) {
        currentFile = file;
        Icon icon = fileSystemView.getSystemIcon(file);
        fileName.setIcon(icon);
        fileName.setText(fileSystemView.getSystemDisplayName(file));
        path.setText(file.getPath());
        date.setText(new Date(file.lastModified()).toString());
        size.setText(file.length() + " bytes");
        readable.setSelected(file.canRead());
        writable.setSelected(file.canWrite());
        executable.setSelected(file.canExecute());
        isDirectory.setSelected(file.isDirectory());

        isFile.setSelected(file.isFile());

        JFrame f = (JFrame)gui.getTopLevelAncestor();
        if (f!=null) {
            f.setTitle(
                APP_TITLE +
                " :: " +
                fileSystemView.getSystemDisplayName(file) );
        }

        gui.repaint();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                try {
                    // Significantly improves the look of the output in
                    // terms of the file names returned by FileSystemView!
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch(Exception weTried) {
                }
                JFrame f = new JFrame(APP_TITLE);
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                FileBrowser FileBrowser = new FileBrowser();
                f.setContentPane(FileBrowser.getGui());

                try {
                    URL urlBig = FileBrowser.getClass().getResource("fb-icon-32x32.png");
                    URL urlSmall = FileBrowser.getClass().getResource("fb-icon-16x16.png");
                    ArrayList&lt;Image&gt; images = new ArrayList&lt;Image&gt;();
                    images.add( ImageIO.read(urlBig) );
                    images.add( ImageIO.read(urlSmall) );
                    f.setIconImages(images);
                } catch(Exception weTried) {}

                f.pack();
                f.setLocationByPlatform(true);
                f.setMinimumSize(f.getSize());
                f.setVisible(true);

                FileBrowser.showRootFile();
            }
        });
    }
}

/** A TableModel to hold File[]. */
class FileTableModel extends AbstractTableModel {

    private File[] files;
    private FileSystemView fileSystemView = FileSystemView.getFileSystemView();
    private String[] columns = {
        "Icon",
        "File",
        "Path/name",
        "Size",
        "Last Modified",
        "R",
        "W",
        "E",
        "D",
        "F",
    };

    FileTableModel() {
        this(new File[0]);
    }

    FileTableModel(File[] files) {
        this.files = files;
    }

    public Object getValueAt(int row, int column) {
        File file = files[row];
        switch (column) {
            case 0:
                return fileSystemView.getSystemIcon(file);
            case 1:
                return fileSystemView.getSystemDisplayName(file);
            case 2:
                return file.getPath();
            case 3:
                return file.length();
            case 4:
                return file.lastModified();
            case 5:
                return file.canRead();
            case 6:
                return file.canWrite();
            case 7:
                return file.canExecute();
            case 8:
                return file.isDirectory();
            case 9:
                return file.isFile();
            default:
                System.err.println("Logic Error");
        }
        return "";
    }

    public int getColumnCount() {
        return columns.length;
    }

    public Class&lt;?&gt; getColumnClass(int column) {
        switch (column) {
            case 0:
                return ImageIcon.class;
            case 3:
                return Long.class;
            case 4:
                return Date.class;
            case 5:
            case 6:
            case 7:
            case 8:
            case 9:
                return Boolean.class;
        }
        return String.class;
    }

    public String getColumnName(int column) {
        return columns[column];
    }

    public int getRowCount() {
        return files.length;
    }

    public File getFile(int row) {
        return files[row];
    }

    public void setFiles(File[] files) {
        this.files = files;
        fireTableDataChanged();
    }
}

/** A TreeCellRenderer for a File. */
class FileTreeCellRenderer extends DefaultTreeCellRenderer {

    private FileSystemView fileSystemView;

    private JLabel label;

    FileTreeCellRenderer() {
        label = new JLabel();
        label.setOpaque(true);
        fileSystemView = FileSystemView.getFileSystemView();
    }

    @Override
    public Component getTreeCellRendererComponent(
        JTree tree,
        Object value,
        boolean selected,
        boolean expanded,
        boolean leaf,
        int row,
        boolean hasFocus) {

        DefaultMutableTreeNode node = (DefaultMutableTreeNode)value;
        File file = (File)node.getUserObject();
        label.setIcon(fileSystemView.getSystemIcon(file));
        label.setText(fileSystemView.getSystemDisplayName(file));
        label.setToolTipText(file.getPath());

        if (selected) {
            label.setBackground(backgroundSelectionColor);
            label.setForeground(textSelectionColor);
        } else {
            label.setBackground(backgroundNonSelectionColor);
            label.setForeground(textNonSelectionColor);
        }

        return label;
    }
}


The FileBrowser.java source code is around 650 lines.

Also


Here are 2 icons for the app. (but it will run OK without them).  They will be used if found in the same directory as the classes.  The icons use Color.WHITE to represent unselected table rows &amp; tree nodes, so those are invisible in a web page with white background.  ;)

fb-icon-16x16.png <img src="http://i.stack.imgur.com/m0KKu.png" alt="fm-icon-16x16.png">
fb-icon-32x32.png <img src="http://i.stack.imgur.com/LVVMb.png" alt="fm-icon-32x32.png">

Any other comments/tips/suggestions are welcome.


                
    
        To align my JFrame from righ-to-left, I use:

setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);


but this works only if I use the following style (decoration) of the JFrame:

public class RightToLeft {
  public static void main(String []args){
    javax.swing.SwingUtilities.invokeLater(new Runnable(){
      public void run() {
        try { UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName()); }
        catch (Exception e) { e.printStackTrace(); }
        JFrame.setDefaultLookAndFeelDecorated(true);
        JFrame frame = new JFrame("??????? ???????");
        frame.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        frame.setSize(300,300);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setVisible(true);
      }
    });
  }
}


<img src="http://i.stack.imgur.com/UMjAU.png" alt="enter image description here">

but I want it to work without this decoration. How to solve this issue?

EDIT:

@mre I want a JFrame like this one:

<img src="http://i.stack.imgur.com/Wm4DK.png" alt="enter image description here">

EDIT2:

I really really need this issue to be fixed, so I offer 500+ to who will give a JFrame like this (with WindowsLookAndFeel):

<img src="http://i.stack.imgur.com/Jmj8V.png" alt="enter image description here">

                
    
        I realize it's a chicken and egg problem and that it's not possible to accurately resolve the time it took to render a page (or the size of response) and insert that number into the page itself without affecting either measure. Nevertheless, I'm looking for a way to insert either number partially in a page of a JSF/Facelets/Seam application.

E.g., at the bottom of a .jsf page somewhere:

&lt;!-- page size: 10.3Kb --&gt;
&lt;!-- render time: 0.2s --&gt;


I've come across JSFUnit's <a href="http://community.jboss.org/wiki/JSFUnitPerformanceAnalysis" rel="nofollow">JSFTimer, which is really handy. However, the phase listener approach doesn't allow the results of RENDER_RESPONSE phase to be inserted into the page. Not sure how to access the size of the response encoded so far either.

Is there a quick and dirty way to hook up to some sort of post-processing event at or after the end of RENDER_RESPONSE and to inject both numbers into the page about to be rendered? One way of approaching this is perhaps through servlet filters, but I'm looking for something simpler; perhaps a trick with Seam or Facelets...

Thanks,
-A

                
    
        So I've got a JPanel implementing MouseListener and MouseMotionListener:

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class DisplayArea extends JPanel implements MouseListener, MouseMotionListener  {
    public DisplayArea(Rectangle bounds, Display display) {
        setLayout(null);
        setBounds(bounds);
        setOpaque(false);
        setPreferredSize(new Dimension(bounds.width, bounds.height));

        this.display = display;
    }

    public void paintComponent(Graphics g) {
         Graphics2D g2 = (Graphics2D)g;
         if (display.getControlPanel().Antialiasing()) {
             g2.addRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));
         }
         g2.setColor(Color.white);
         g2.fillRect(0, 0, getWidth(), getHeight());
    }

    public void mousePressed(MouseEvent event) {
        System.out.println("mousePressed()");
        mx1 = event.getX();
        my1 = event.getY();
    }

    public void mouseReleased(MouseEvent event) {
        System.out.println("mouseReleased()");
        mx2 = event.getX();
        my2 = event.getY();

        int mode = display.getControlPanel().Mode();
        switch (mode) {
        case ControlPanel.LINE:
             System.out.println("Line from " + mx1 + ", " + my1 + " to " + mx2 + ", " + my2 + ".");
        }
    }

    public void mouseEntered(MouseEvent event) {
        System.out.println("mouseEntered()");
    }

    public void mouseExited(MouseEvent event) {
        System.out.println("mouseExited()");
    }

    public void mouseClicked(MouseEvent event) {
        System.out.println("mouseClicked()");
    }

    public void mouseMoved(MouseEvent event) {
        System.out.println("mouseMoved()");
    }

    public void mouseDragged(MouseEvent event) {
         System.out.println("mouseDragged()");
    }

    private Display display = null;

    private int mx1 = -1;
    private int my1 = -1;
    private int mx2 = -1;
    private int my2 = -1;
}


The trouble is, none of these mouse functions are ever called. DisplayArea is created like this:

da = new DisplayArea(new Rectangle(CONTROL_WIDTH, 0, DISPLAY_WIDTH, DISPLAY_HEIGHT), this);


I am not really a Java programmer (this is part of an assignment), but I can't see anything glaringly obvious. Can someone smarter than I see anything?

Thanks in advance.

                
    
        I am trying to locate a key in a HashMap. I can print the selected key by using 'get'   but when I use 'containsKey' in an if statement, it is not found.

I KNOW the key is present in the Map but it keeps returning false. Any ideas people?

My code:

public static boolean checkLowerStructuralSupport(Location location) {

boolean hasSupport = false;

Location supportingLocation = new Location(location.getX(), location.getY(), location.getZ() -1);

System.out.println( _levels.get(supportingLocation.getZ()).getLevelSites2().get(supportingLocation)); //works

    	if (_levels.get(supportingLocation.getZ()).getLevelSites2().containsKey(supportingLocation)) {
    		hasSupport = true;
    	}
    	else {
    		hasSupport = false;
    	}

    	return hasSupport;
}


Here is the code for the Location class:

public class Location {

    protected int _x;
    protected int _y;
    protected int _z;

    public Location(int xAxis, int yAxis, int zAxis) {
    	this._x = xAxis;
    	this._y = yAxis;
    	this._z = zAxis;
    }

    public void equals() {
    	//not implemented yet
    }

    public void HashCode() {
    	//not implemented yet
    }

    public String toString() {
    	String locationString = Integer.toString(_x) + Integer.toString(_y) + Integer.toString(_z);
    	return locationString;
    }

    public void setX(int XAxis) {
    	this._x = XAxis;
    }

    public int getX() {
    	return this._x;
    }

    public void setY(int YAxis) {
    	this._y = YAxis;
    }

    public int getY() {
    	return this._y;
    }

    public void setZ(int ZAxis) {
    	this._z = ZAxis;
    }

    public int getZ() {
    	return this._z;
    }

}


                
    
        I mostly use Java and generics are relatively new. I keep reading that Java made the wrong decision or that .NET has better implementations etc. etc.

So, what are the main differences between C++, C#, Java in generics? Pros/cons of each?

                
    
        I'm looking to generate a simple standalone Java client which will make calls to a SOAP web service, given a wsdl.  When I say simple and standalone I mean that once I'm done I want to be able to do something like

import my.generated.nonsense;

public static void main(String[] args) {
    Client client = new Client();
    client.getSomething();
}


I've had great time recently with Maven on some other projects and I want to keep that going, so would aim to use it here.  I don't want the tool to generate anything expect the classes that allow me to do the above.

Anyone done this recently and can recommend a ws library and Maven plugin?  Thanks.

                
    
        I would like to be able to write a Java class in one package which can access non-public methods of a class in another package without having to make it a subclass of the other class. Is this possible?

                
    
        I have a convert method, which takes a String and a class as arguments and constructs an object of the given class, which will be returned.

The usage should look like this

Something s = Converter.convert("...", Something.class)


Is it possible to express this with Java generics?

                
    
        I just played with Java file system API, and came down with the following function, used to copy binary files. The original source came from the Web, but I added try/catch/finally clauses to be sure that, should something wrong happen, the Buffer Streams would be closed (and thus, my OS ressources freed) before quiting the function.

I trimmed down the function to show the pattern:

public static void copyFile(FileOutputStream oDStream, FileInputStream oSStream) throw etc...
{
   BufferedInputStream oSBuffer = new BufferedInputStream(oSStream, 4096);
   BufferedOutputStream oDBuffer = new BufferedOutputStream(oDStream, 4096);

   try
   { 
      try
      { 
         int c;

         while((c = oSBuffer.read()) != -1)  // could throw a IOException
         {
            oDBuffer.write(c);  // could throw a IOException
         }
      }
      finally
      {
         oDBuffer.close(); // could throw a IOException
      }
   }
   finally
   {
      oSBuffer.close(); // could throw a IOException
   }
}


As far as I understand it, I cannot put the two close() in the finally clause because the first close() could well throw, and then, the second would not be executed.

I know C# has the Dispose pattern that would have handled this with the using keyword.

I even know better a C++ code would have been something like (using a Java-like API):

void copyFile(FileOutputStream &amp; oDStream, FileInputStream &amp; oSStream)
{
   BufferedInputStream oSBuffer(oSStream, 4096);
   BufferedOutputStream oDBuffer(oDStream, 4096);

   int c;

   while((c = oSBuffer.read()) != -1)  // could throw a IOException
   {
      oDBuffer.write(c);  // could throw a IOException
   }

   // I don't care about resources, as RAII handle them for me
}


I am missing something, or do I really have to produce ugly and bloated code in Java just to handle exceptions in the close() method of a Buffered Stream?

(Please, tell me I'm wrong somewhere...)

EDIT: Is it me, or when updating this page, I saw both the question and all the answers decreased by one point in a couple of minutes? Is someone enjoying himself too much while remaning anonymous?

EDIT 2: McDowell offered a very interesting link I felt I had to mention here:
<a href="http://illegalargumentexception.blogspot.com/2008/10/java-how-not-to-make-mess-of-stream.html" rel="nofollow">http://illegalargumentexception.blogspot.com/2008/10/java-how-not-to-make-mess-of-stream.html

EDIT 3: Following McDowell's link, I tumbled upon a proposal for Java 7 of a pattern similar to the C# using pattern: <a href="http://tech.puredanger.com/java7/#resourceblock" rel="nofollow">http://tech.puredanger.com/java7/#resourceblock . My problem is explicitly described. Apparently, even with the Java 7 do, the problems remain.

                
    
        Perhap this is a simple basic question

Having an enum

public enum TK{
        ID,GROUP,DATA,FAIL;
        }


Can I get the order number for example ID=0, GROUP=2, DATA=3, FAIL=4 ?

This is a way to to that, but a weird and long one! =S 

public enum TK{
        ID(0),GROUP(1),DATA(2),FAIL(3);

        int num;
        TK(int n)
        {
           this.num=n;
        }

        public int get()
        {
           return num;
        }

  };


to get numbers so I write TK.ID.get(), TK.GROUP.get(), etc... I don't like that

there is a better way?

( C enums, C macros..I miss you both )

thanks

                
    
        I need to do a periodic operation (call a java method) in my web app (jsp on tomcat).
How can i do this ? Java daemon or others solutions ?

                
    
        To make it short: hibernate doesn't support projections and query by example? I found this post:

The code is this:

User usr = new User();
usr.setCity = 'TEST';
getCurrentSession().createCriteria(User.class)
.setProjection( Projections.distinct( Projections.projectionList()
.add( Projections.property("name"), "name")
.add( Projections.property("city"), "city")))
.add( Example.create(usr))


Like the other poster said, The generated sql keeps having a where class refering to just y0_= ? instead of this_.city. 

I already tried several approaches, and searched the issue tracker but found nothing about this.

I even tried to use Projection alias and Transformers, but it does not work:

User usr = new User();
usr.setCity = 'TEST';
getCurrentSession().createCriteria(User.class)
.setProjection( Projections.distinct( Projections.projectionList()
.add( Projections.property("name"), "name")
.add( Projections.property("city"), "city")))
.add( Example.create(usr)).setResultTransformer(Transformers.aliasToBean(User.class));


Has anyone used projections and query by example ?

                
    
        Motivation

Recently I searched for a way to initialize a complex object without passing a lot of parameter to the constructor. I tried it with the builder pattern, but I don't like the fact, that I'm not able to check at compile time if I really set all needed values.

Traditional builder pattern

When I use the builder pattern to create my Complex object, the creation is more "typesafe", because it's easier to see what an argument is used for:

new ComplexBuilder()
        .setFirst( "first" )
        .setSecond( "second" )
        .setThird( "third" )
        ...
        .build();


But now I have the problem, that I can easily miss an important parameter. I can check for it inside the build() method, but that is only at runtime. At compile time there is nothing that warns me, if I missed something.

Enhanced builder pattern

Now my idea was to create a builder, that "reminds" me if I missed a needed parameter. My first try looks like this:

<img src="http://yuml.me/diagram/scale:75/class/%5BComplexBuilder%7C%20Complex%20instance%7CBuilder2%20setFirst%28%29%5D%2C%20%5BComplexBuilder%5D+-%5BBuilder2%7CBuilder3%20setSecond%28%29%5D%2C%20%5BBuilder2%5D+-%5BBuilder3%7CBuilder4%20setThird%28%29%5D%2C%20%5BBuilder3%5D+-%5BBuilder4%7CComplex%20build%28%29%5D%2C%20%5BBuilder4%5D-.-%3E%5BComplex%5D%2C" alt="uml">


public class Complex {
    private String m_first;
    private String m_second;
    private String m_third;

    private Complex() {}

    public static class ComplexBuilder {
        private Complex m_complex;

        public ComplexBuilder() {
            m_complex = new Complex();
        }

        public Builder2 setFirst( String first ) {
            m_complex.m_first = first;
            return new Builder2();
        }

        public class Builder2 {
            private Builder2() {}
            Builder3 setSecond( String second ) {
                m_complex.m_second = second;
                return new Builder3();
            }
        }

        public class Builder3 {
            private Builder3() {}
            Builder4 setThird( String third ) {
                m_complex.m_third = third;
                return new Builder4();
            }
        }

        public class Builder4 {
            private Builder4() {}
            Complex build() {
                return m_complex;
            }
        }
    }
}


As you can see, each setter of the builder class returns a different internal builder class. Each internal builder class provides exactly one setter method and the last one provides only a build() method.

Now the construction of an object again looks like this:

new ComplexBuilder()
    .setFirst( "first" )
    .setSecond( "second" )
    .setThird( "third" )
    .build();


...but there is no way to forget a needed parameter. The compiler wouldn't accept it.

Optional parameters

If I had optional parameters, I would use the last internal builder class Builder4 to set them like a "traditional" builder does, returning itself.

Questions


Is this a well known pattern? Does it have a special name?
Do you see any pitfalls?
Do you have any ideas to improve the implementation - in the sense of fewer lines of code?


                
    
        An 64-bit double can represent integer +/- 253 exactly

Given this fact I choose to use a double type as a single type for all my types, since my largest integer is unsigned 32-bit.

But now I have to print these pseudo integers, but the problem is they are also mixed in with actual doubles.

So how do I print these doubles nicely in Java?

I have tried String.format("%f", value), which is close, except I get a lot of trailing zeros for small values.

Here's an example output of of %f


232.00000000
0.18000000000
1237875192.0
4.5800000000
0.00000000


Sure I can write a function to trim those zeros, but that's lot of performance loss due to String manipulation.  Can I do better with another format code?

                
    
        I have a series of XSL 2.0 stylesheets that feed into each other, i.e. the output of stylesheet A feeds B feeds C.

What is the most efficient way of doing this?  The question rephrased is: how can one efficiently route the output of one transformation into another.

Here's my first attempt:

@Override
public void transform(Source data, Result out) throws TransformerException{
	for(Transformer autobot : autobots){
		if(autobots.indexOf(autobot) != (autobots.size()-1)){
			log.debug("Transforming prelim stylesheet...");
			data = transform(autobot,data);
		}else{
			log.debug("Transforming final stylesheet...");
			autobot.transform(data, out);
		}
	}
}

private Source transform(Transformer autobot, Source data) throws TransformerException{
	DOMResult result = new DOMResult();
	autobot.transform(data, result);
	Node node = result.getNode();
	return new DOMSource(node);
}


As you can see, I'm using a DOM to sit in between transformations, and although it is convenient, it's non-optimal performance wise.

Is there any easy way to route to say, route a SAXResult to a SAXSource?  A StAX solution would be another option.

I'm aware of projects like <a href="http://xproc.org" rel="nofollow">XProc, which is very cool if you haven't taken a look at yet, but I didn't want to invest in a whole framework.

                
    
        I have the following problem:
I'm using the wsimport ant task to create a webservice client (for salesforce.com).
Everything's working fine but the generated classes all use this strange JAXBElement class for all bean properties. 

Eg:


public void setLastName(JAXBElement&lt;String&gt; value) {
    this.lastName = ((JAXBElement&lt;String&gt; ) value);
}

public JAXBElement&lt;String&gt; getCountry() {
    return country;
}



Instead of wrapping all classes in JAXBElement I'd like to have simple methods like setLastName(String newLastName).
That's how I'm calling the wsimport task.

&lt;wsimport debug="false" verbose="false" keep="${keep}" 
   extension="${extension}" destdir="${tmp.metro}" 
   wsdl="${licensing.wsdl}" 
   sourcedestdir="${licensingws.generated.src}"

   &gt;

   &lt;binding dir="${basedir}/etc" includes="${client.binding}"   
     /&gt;
    &lt;arg value="-B-XautoNameResolution" /&gt;

  &lt;/wsimport&gt;


The task is defined this way:


  
 

Does anybody know what I have to set so that wsimport generates the classes the way I want?
Thanks a lot in advance!!!

                
    
        I googled for few days to try to get the clear picture of how this works. I have few questions that I couldn't find clear answers to :

-What is the advantage of using DAO class with DAO interface?
-How to handle Hibernate exceptions i.e

public String doSomething(){
            Session session = sessionFactory.getCurrentSession();
            session.beginTransaction();

              Query query = session.createQuery("");

            Object o = query.uniqueResult();

            session.close();

            return "success";
        }


I'm not "forced" to try/catch, so how do I catch/intercept any exceptions that may occur?

-Is opening session everytime for new DAO method more expensive than getting the current session? Should I close the session if I use get?

Question Update :strong text

I have @Service annotation in my service classes and for each method using dao interface I've got @Transactional above. Also I've added @Repository to all my DAO classes

Update II :

I'm considering opening bounty for this questions because I want to know more details and this time I'll provide some.


<a href="http://pastebin.com/5Rg7KBNe" rel="nofollow">Spring context
<a href="http://pastebin.com/fMjq5htw" rel="nofollow">Controller
<a href="http://pastebin.com/w2GByEiA" rel="nofollow">Service Interface
<a href="http://pastebin.com/LaS9vFHT" rel="nofollow">Service Implementation
<a href="http://pastebin.com/91bFXDGi" rel="nofollow">DAO interface
<a href="http://pastebin.com/vg88dJfE" rel="nofollow">DAO implementation


So I want to utilize spring MVC as much as possible, how do I make session opening/closing handled by @Transactional?

How do I catch the exceptions(i.e. non existing record or database failed) if any.

What I'm doing wrong? Can anyone suggest some improvements?

                
    
        
  Possible Duplicate:
  <a href="http://stackoverflow.com/questions/2903385/property-and-encapsulation">Property and Encapsulation  




NEWB Alert!!

I am starting with Android and Java and I am starting to understand it but I am wondering why I should use getters and setters and not just public variables?

I see many people make a private variable and create a get and set method.

What is the idea here?

                
    
        in c# what does exactly happen in the background when you do a comparison with the "==" operator on two objects? does it just compare the addresses? or does it something like Equals() or CompareTo() ?

PS: what about the "==" operator in java? does it behave the same?

                
    
        I have a java process that opens a file using a FileReader. How can I prevent another (java) process to open this file, or at least make that second process know that the file is already opened? Does this automaticaly makes the second process get an exception if the file is open(which solves my problem) or do i have to explicitly open it in the first process with some sort of flag or argument?

To clarify:

I have a java app that lists a folder and opens each file in the listing for processing it. It processes each file after the other. The processing of each file consists of reading it and doing some calculations based on the contents and it takes about 2 minutes. I also have another java app that does the same thing but instead writes on the file. What i want is to be able to run these apps at the same time so the scenario goes like this. ReadApp lists the folder and finds files A, B, C. It opens file A and starts the reading. WriteApp lists the folder and finds files A,B, C It opens file A sees that is is open (by an exception or whatever way) and goes to file B. ReadApp finishes file A and continues to B. It sees that it is open and continues to C. It is crucial that WriteApp doesnt write while ReadApp is reading the same file or vice versa. They are different processes.

                
    
        I'm currently taking a course in Java and I've run into some confusing code.

Example:

Runnable runnable = new Runnable()
        {
            public void run()
            {
                //doStuff
            }
        };


I don't really get what this code is doing.

How can the run method be associated with an instance of a class?

I googled "Runnable" and found out that it is an interface. Am I implementing the interface by declaring the run method between curly brackets ? Can this be done for any interface in java ?

I could use some links/explanations. Thank you!

                
    
        public Interface Foo&lt;T extends Colors&gt;{...}


Is there a way to retrieve which T was given for an implementation of Foo?

For example,

public Class FooImpl implements Foo&lt;Green&gt;{..}


Would return Green.

                
    
        How do I convert Resultset object to a paginated view on a JSP?

For example, this is my query and result set:

pst = con.prepareStatement("select userName, job, place from contact");
rs = pst.executeQuery();


                
    
        This is in relation to my answer to a question provided in this thread: <a href="http://stackoverflow.com/questions/4812464/are-inner-classes-lightweight/4812511#4812511">Are Inner Classes lightweight?

I remember from my reading that if you can only create one object from a single anonymous inner class, and for this reason, if you want to say create an ActionListener class and want to create multiple objects from this one class (not using reflection), to not use an anonymous inner class but rather either a private inner class or a stand along class, but folks are telling me I'm wrong.  Can someone please clarify this for me?  Please check the link as it contains more details, but if anything is unclear, please ask away!

Thanks in advance!

                
    
        I am developing an app that creates a large number of small, immutable Java objects. An example might be:

public class Point {
  final int x;
  final int y;
  final int z;
  .....
}


Where it is likely that many instances of Point will need to refer to the same (x,y,z) location. 

To what extent does it make sense to try to cache and re-use such objects during the lifetime of the application? Any special tricks to handle this kind of situation?

                
    
        Efficient way to implement singleton pattern in Java?

                
    
        Is there a way in java to specify, that the type parameter of a generic class must be an interface (not just extending it!)

What I want to do is the following:

public class MyClass&lt;X extends SomeInterface, Y extends SomeOtherClass &amp; X&gt;


Meaning that Y must be a subclass of SomeOtherClass AND implement X.
What I currently get by the compiler is


  The type X is not an interface; it cannot be specified as a bounded parameter


So, how can I tell the compiler that X must always be an interface?

Edit:
OK, I guess I oversimplified my problem a bit. Let's use my actual application domain to make it more clear:

I have an API for representing diagrams. A Diagram contains Node and Edge objects. All these three classes implement the Shape interface. Shapes may have child shapes, a parent shape and belong to a diagram.

The thing is, that I need to make two versions of this API: one open-source with just basic functionality and an extended one with more features. However, the extended API must only provide methods, which return the extended types (ExtendedDiagram, ExtendedNode, ExtendedEdge and (here comes the problem) ExtendedShape).
So I have something like this:

/* BASIC CLASSES */
public interface Shape&lt;X extends Shape&lt;X,Y&gt;, Y extends Diagram&lt;X,Y&gt;&gt;{
    public List&lt;X&gt; getChildShapes();
    public X getParent();
    public Y getDiagram();
    ...
}

public class Diagram&lt;X extends Shape&lt;X,Y&gt;, Y extends Diagram&lt;X,Y&gt;&gt; implements Shape&lt;X,Y&gt;{...}
public class Edge&lt;X extends Shape&lt;X,Y&gt;, Y extends Diagram&lt;X,Y&gt;&gt; implements Shape&lt;X,Y&gt;{...}
...

/* EXTENDED CLASSES */
public interface ExtendedShape extends Shape&lt;ExtendedShape,ExtendedDiagram&gt; { ... }

public class ExtendedDiagram extends Diagram&lt;ExtendedShape,ExtenedDiagram&gt; implements ExtendedShape { ... }
public class ExtendedEdge extends Edge&lt;ExtendedShape,ExtenedDiagram&gt; implements ExtendedShape { ... }
...


The extended API works fine and the basic API code gives some warnings, but the main problem occurs when using the basic API:

public class SomeImporter&lt;X extends Shape&lt;X,Y&gt;, Y extends Diagram&lt;X,Y&gt;, E extends Edge&lt;X,Y&gt;&gt;{
    private Y diagram;

    public void addNewEdge(E newEdge){
        diagram.addChildShape(newEdge);
    ...


That last line gives me the following warning:


  The method addChildShape(X) in the type Diagram is not applicable for the arguments (E)


So now, I would just like to specify that E also needs to implement X and all would be fine - I hope ;)

Does all that make sense? Do you guys know a way to do that? Or is there even a better way to get the extended API with the said restrictions?
Thanks for sticking with me, any help is greatly appreciated!

                
    
        I am starting to use MySQL with JDBC.

Class.forName("com.mysql.jdbc.Driver");
conn = DriverManager.getConnection("jdbc:mysql:///x", "x", "x");
stmt = conn.createStatement();
stmt.execute( "CREATE TABLE amigos" +
            "("+
            "id          int AUTO_INCREMENT          not null,"+
            "nombre      char(20)                    not null,"+
            "primary key(id)" +
            ")");


I have 3-4 tables to create and this doesn't look good.

Is there a way to run a .sql script from MySQL JDBC?

                
    
        I'm a beginner in Java.  I'm trying, for training purpose, to build myself a chess game application.  Within my class Case, that will be used to instanciate all the 64 cases of my board, I write get/set methods to find if there's a Piece occupant in the instances of the case.

I read that returning "null" is a bad practice, so I throw an exception instead to signify that the case is free.  But, I wonder how to set the occupant's pointer to "null"; can I simply push "null" as a parameter when I will call this method?

Also, could taking/returning "null" be an acceptable/good practice?

public Piece getOccupant(){
    if (this.occupant == null)
        throw new IllegalArgumentException(this.occupant + " is Empty");
    return this.occupant;
}
public void setOccupant(Piece newOccupant){
    this.occupant = newOccupant;
}


Thanks!

[Update]

Thanks to all of your for your comments, ideas, corrections and recommendations.  Here is the updated version of my code for this part, and I feel satisfied with it, as it served its purpose (increase my understanding thru practice).

/*
 * Modifiers of Occupant
 */
/**
 * Used to find if a Piece is located in this Cell
 * @return a Piece reference to the occupant.  Will send a 
 * null pointer if cell is empty
 */
public Piece getOccupant(){
    return this.occupant;
}
/**
 * Used to set a new occupant in the Cell.
 * @param newOccupant is a reference to a Piece instance, 
 * and should be set to null if the cell is emptied, or using
 * the method clear().
 */
public void setOccupant(Piece newOccupant){
    this.occupant = newOccupant;
}
/**
 * Used to verify if a Cell is empty of any occupant
 * @return true if cell is empty.
 */
public boolean isEmpty(){
    if(this.occupant == null)
        return true;
    return false;
}
/**
 * Free the cell of any occupant, if any were
 */
public void clear(){
    this.occupant = null;
}


                
    
        I wonder if it is possible to implement a GUI panel (possibly JPanel) that is of square shape but rotated 90 degrees. Obviously, there will be a top-level container which contains this panel, and visually the main panel is this rotated square panel within.

More specifically, I would divide a panel (called 'A') into 4 equal square sub-panels, and fill these sub-panels with JLabels, for which I am thinking to use GridLayout. And lastly, I would rotate 'A' 90 degrees to give what I want.

From my reading of other similar questions, it seems that you cannot rotate JPanel itself, but you can rotate what is contained within. Is this applicable to my case here? Would appreciate if someone could point out. Thanks. 

                
    
        I'm a bit new to Guava and it's style. I'm definitely digging it, but one thing I keep tripping over is the order of chained methods. Where I seem to have this problem the most is when using compound Orderings. I have to keep asking myself questions like:


Where does the natural go?
Where does the nullFirst (or last) go?
Which nullsFirst does what? (In the example below, one for host, one for last name, one for first name?)


Here's an example of one that I was just working on. It looks cumbersome, and I'm just not sure if I put it all together right. I have some JUnits to test it, and it seems okay, but there are always those quirky boundary cases.

Ordering&lt;Host&gt; lastNameThenFirstNameOrdering = Ordering.natural().nullsFirst().onResultOf(new Function&lt;Host, String&gt;() {
    public String apply(Host host) {
        return host.getLastName();
    }}).compound(Ordering.natural().nullsFirst().onResultOf(new Function&lt;Host, String&gt;() {
    public String apply(Host host) {
        return host.getFirstName();
    }})).nullsFirst();


As for an actual question: Is there a well-defined rule for how these things get executed? It seems to be last-to-first, but I'm having trouble telling that.

edit: Just wanted to point out the large, ugly code I was trying to replace:

    Ordering&lt;Host&gt; ordering2 = new Ordering&lt;Host&gt;() {
        public int compare(Host host1, Host host2) {
            if (host1 == null || host2 == null) {
                return host1 == host2 ? 0 : ((host1 == null) ? -1 : 1); 
            }
            if(host1.getLastName() != null || host2.getLastName() != null){
                if (host1.getLastName() == null) {
                    return -1;
                } else if (host2.getLastName() == null) {
                    return 1;
                }

                if (host1.getLastName().compareTo(host2.getLastName()) != 0) {
                    return host1.getLastName().compareTo(host2.getLastName());
                }
            }

            if (host1.getFirstName() == null) {
                return -1;
            } else if (host2.getFirstName() == null) {
                return 1;
            }

            return host1.getFirstName().compareTo(host2.getFirstName());
        }};


                
    
        When creating a new project in netbeans, if i select JAVA Desktop application, it creates some code which I DO NOT RECOGNISE AT ALL as what i had learnt in swing.

It imports packages such as :

org.jdesktop.application.SingleFrameApplication;


also, the declaration for main() looks like this :

public static void main(String[] args) {
            launch(DesktopApplication2.class, args);
        }


This really does not make any sense to my knowledge of JFrame, JPanel etc..

If i try to code a  netbeans application from scratch, i can write my own swing app BUT I CANNOT FIND THE GUI EDITOR.


How do i bring the GUI editor when creating java application from scratch ?
Can anyone explain to me this org.jdesktop.application.SingleFrameApplication and other classes ? 


Please help. This is really frustrating.

                
    
        Is it possible for a JPA entity class to contain two embedded (@Embedded) fields? An example would be:

@Entity
public class Person {
    @Embedded
    public Address home;

    @Embedded
    public Address work;
}

public class Address {
    public String street;
    ...
}


In this case a Person can contain two Address instances - home and work. I'm using JPA with Hibernate's implementation. When I generate the schema using Hibernate Tools, it only embeds one Address. What I'd like is two embedded Address instances, each with its column names distinguished or pre-pended with some prefix (such as home and work). I know of @AttributeOverrides, but this requires that each attribute be individually overridden. This can get cumbersome if the embedded object (Address) gets big as each column needs to be individually overridden.

                
    
        See topic - do you see any problem with this? I could also do new String(byte[]) and hash by String but it is more straightforward to use byte[]

                
    
        I have a handful of helper methods that convert enum values into a list of strings suitable for display by an HTML &lt;select&gt; element. I was wondering if it's possible to refactor these into a single polymorphic method. 

This is an example of one of my existing methods:

/**
 * Gets the list of available colours.
 * 
 * @return the list of available colours
 */
public static List&lt;String&gt; getColours() {
  List&lt;String&gt; colours = new ArrayList&lt;String&gt;();

  for (Colour colour : Colour.values()) {
    colours.add(colour.getDisplayValue());  
  }

  return colours;
}


I'm still pretty new to Java generics, so I'm not sure how to pass a generic enum to the method and have that used within the for loop as well.

Note that I know that the enums in question will all have that getDisplayValue method, but unfortunately they don't share a common type that defines it (and I can't introduce one), so I guess that will have to be accessed reflectively...?

Thanks in advance for any help.

                
    
        I'm a teacher, and yesterday a student wrote the following code:

public class Tests {

    public static void main(String[] args) throws Exception {
        int x = 0;
        while(x&lt;3) {
            x = x++;
            System.out.println(x);
        }
    }
}


we know he should have writen just x++ or x=x+1, but on x = x++; it should first attribute x to itself, and later increment x. Why does x continue with 0 as value?

--update

Here's the bytecode:

public class Tests extends java.lang.Object{
public Tests();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."&lt;init&gt;":()V
   4:   return

public static void main(java.lang.String[])   throws java.lang.Exception;
  Code:
   0:   iconst_0
   1:   istore_1
   2:   iload_1
   3:   iconst_3
   4:   if_icmpge   22
   7:   iload_1
   8:   iinc    1, 1
   11:  istore_1
   12:  getstatic   #2; //Field java/lang/System.out:Ljava/io/PrintStream;
   15:  iload_1
   16:  invokevirtual   #3; //Method java/io/PrintStream.println:(I)V
   19:  goto    2
   22:  return

}


I'll read about the <a href="http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings" rel="nofollow">instructions to try to understand...

                
    
        This may be something common and trivial, but I seem to be having trouble finding a concrete answer. In C# there is a concept of delegates, which relates strongly to the idea of function pointers from C++. Is there a similar functionality in Java? Given that pointers are somewhat absent, what is the best way about this? And to be clear, we're talking first class here.

                
    
        I am using <a href="http://wicket.apache.org/" rel="nofollow">Wicket with the Wicket Auth Project for my presentation layer and I have therefore integrated it with Spring Security. This is the method which is called by Wicket for authentication for me:

@Override
public boolean authenticate(String username, String password) {
    try {
    	Authentication request = new UsernamePasswordAuthenticationToken(
    			username, password);
    	Authentication result = authenticationManager.authenticate(request);
    	SecurityContextHolder.getContext().setAuthentication(result);
    } catch (AuthenticationException e) {
    	return false;
    }
    return true;
}


The contents (inside ) of my Spring Security XML configuration are:

&lt;http path-type="regex"&gt;
    &lt;form-login login-page="/signin"/&gt;
&lt;logout logout-url="/logout" /&gt;
&lt;/http&gt;
&lt;global-method-security secured-annotations="enabled" /&gt;
&lt;authentication-manager alias="authenticationManager"/&gt;
&lt;authentication-provider user-service-ref="userService"&gt;
    &lt;password-encoder ref="bcryptpasswordencoder" /&gt;
&lt;/authentication-provider&gt;


The section <a href="http://static.springframework.org/spring-security/site/docs/2.0.x/reference/ns-config.html#ns-session-fixation" rel="nofollow">2.3.6. Session Fixation Attack Protection of the reference documentation says:


  Session fixation attacks are a potential risk where it is possible
  for a malicious attacker to create a
  session by accessing a site, then
  persuade another user to log in with
  the same session (by sending them a
  link containing the session identifier
  as a parameter, for example). Spring
  Security protects against this
  automatically by creating a new
  session when a user logs in. If you
  don't require this protection, or it
  conflicts with some other requirement,
  you can control the behaviour using
  the session-fixation-protection
  attribute on , which has three
  options:
  
  
  migrateSession - creates a new session and copies the existing
  session attributes to the new session. This is the default.
  none - Don't do anything. The original session will be retained.
  newSession - Create a new "clean" session, without copying the
  existing session data.
  


The authentication works, but I as I'm fairly new to Spring Security I have some questions which I need answers too:


Normally for login, I would POST the authentication information to j_spring_security_check and let Spring Security perform the actual authentication code. I would like to have protection against session fixation attacks, will I get it when I perform a programmatic login as I do? And if not, what would I have to do to get it?
How do I perform programmatic logout?
As I will use programmatic login and logout, how do I disable Spring from intercepting those URL's?


Update:
For session fixation attack protection it seems that I need to call the method in the SessionUtils class with the signature startNewSessionIfRequired(HttpServletRequest request, boolean migrateAttributes, SessionRegistry sessionRegistry).

How do I get the SessionRegistry instance which I need to pass in? I can't find any way to create an alias ID for it, or how to get it's ID or name.

                
    
        During the last years I always thought that in Java, Reflection is widely used during Unit testing. Since some of the variables/methods which have to be checked are private, it is somehow necessary to read the values of them. I always thought that the Reflection API is also used for this purpose.

Last week i had to test some packages and therefore write some JUnit tests. As always i used Reflection to access private fields and methods. But my supervisor who checked the code wasn't really happy with that and told me that the Reflection API wasn't meant to use for such "hacking". Instead he suggested to modifiy the visibility in the production code.

Is it really bad practice to use Reflection? I can't really believe that-

Edit: I should have mentioned that i was required that all tests are in a separate package called test (so using protected visibilty e.g. wasn't a possible solution too)

                
    
        Following my previous question, <a href="http://stackoverflow.com/questions/3882108/dao-and-service-layers-jpa-hibernate-spring">DAO and Service layers (JPA/Hibernate + Spring), I decided to use just a single DAO for my data layer (at least at the beginning) in an application using JPA/Hibernate, Spring and Wicket. The use of generic CRUD methods was proposed, but I'm not very sure how to implement this using JPA. Could you please give me an example or share a link regarding this?

                
    
        I have a string like this String str = "la$le\\$li$lo".

I want to split it to get the following output "la","le\\$li","lo". The \$ is a $ escaped so it should be left in the output.

But when I do  str.split("[^\\\\]\\$") y get "l","le\\$l","lo".

From what I get my regex is matching a$ and i$ and removing then. Any idea of how to get my characters back?

Thanks

                
    
        Why am i not allowed to do this?

public abstract class A {}
public class B extends A {}
...

public ArrayList&lt;A&gt; foo()
{
  return new ArrayList&lt;B&gt;();
}


I changed to public since there are so many people that love to point stupid errors.

Why should i have to write ALL this code. Just to satisfy Java's non-senses?

public List&lt;A&gt; foo() 
{ 
  List&lt;A&gt; aList = new ArrayList&lt;A&gt;(); 
  List&lt;B&gt; bList = new ArrayList&lt;B&gt;();
  /* fill bList*/

  for (B b : bList)
  {
    aList.add(b);
  }
  return aList;
}


                
    
        I'm a beginner when it comes to design patterns , and I have a question related to the decorator design pattern . Presuming I have a class named A , and I want to use the decorator design pattern . Correct me if I'm wrong , but for that to work , we'll need to create a decorator class ( ADecorator ) , which will hold a reference to an A instance , and all the other decorators will extend this to add functionality .

I don't understand why do we have to create a decorator class , instead of using an A instance ?

                
    
        I need to get all the values from an enum, whose type will only be known at runtime. I've come up with the following, but would like to know if anyone knows a better way:

enum TestEnum  {
  FOO,
  BAR
}

Enum[] getValuesForEnum(Class type) {
  try {
    Method m = type.getMethod("values");
    return (Enum[])m.invoke(null);
  } catch (Exception e) {
    throw new RuntimeException(e);
  }
}

Class testEnum = Class.forName("TestEnum");
getValuesForEnum(testEnum);


Thanks!

                
    
        Suppose I am having three dropdownlist controls named dd1, dd2 and dd3. The value of each dropdownlist comes from database. dd3's value depends upon value of dd2 and dd2's value depends on value of dd1. Can anyone tell me how do I call servlet for this problem?

                
    
        I am looking for a way to convert a long string (from a dump), that represents hex values into a byte array.

I couldn't have phrased it better than the person that posted the same question here:

<a href="http://www.experts-exchange.com/Programming/Programming_Languages/Java/Q_21062554.html" rel="nofollow">http://www.experts-exchange.com/Programming/Programming_Languages/Java/Q_21062554.html

But to keep it original, I'll phrase it my own way: suppose I have a string "00A0BF" that I would like interpreted as the byte[] {0x00,0xA0,0xBf} what should I do?

I am a Java novice and ended up using BigInteger and watching out for leading hex zeros. But I think it is ugly and I am sure I am missing something simple... 

                
    
        Can someone tell me why assertSame() do fail when I use values > 127?

        import static org.junit.Assert.*;

        ...

        @Test
        public void StationTest1() {
          ..

          assertSame(4, 4);         // OK
          assertSame(10, 10);       // OK
          assertSame(100, 100);     // OK
          assertSame(127, 127);     // OK
          assertSame(128, 128);           // raises an junit.framework.AssertionFailedError!
          assertSame(((int) 128),((int) 128)); // also junit.framework.AssertionFailedError!
        }


I'm using JUnit 4.8.1. 

                
    
        Consider this example (typical in OOP books):
I have an Animal class, where each Animal can have many friends.
And subclasses like Dog, Duck, Mouse etc which add specific behavior like bark(), quack() etc.

Here's the Animal class:

public class Animal {
    private Map&lt;String,Animal&gt; friends = new HashMap&lt;String,Animal&gt;();

    public void addFriend(String name, Animal animal){
        friends.put(name,animal);
    }

    public Animal callFriend(String name){
        return friends.get(name);
    }
}


And here's some code snippet with lots of typecasting:

Mouse jerry = new Mouse();
jerry.addFriend("spike", new Dog());
jerry.addFriend("quacker", new Duck());

((Dog) jerry.callFriend("spike")).bark();
((Duck) jerry.callFriend("quacker")).quack();


Is there any way i can use Generics for the return type to get rid of the typecasting so that i can say    

jerry.callFriend("spike").bark();
jerry.callFriend("quacker").quack();


Here's some initial code with Return type conveyed to the method as a parameter thats never used. 

public&lt;T extends Animal&gt; T callFriend(String name, T unusedTypeObj){
    return (T)friends.get(name);        
}


Is there a way to figure out the Return type at runtime without the extra parameter using instanceof. Or atleast by passing a class of the Type instead of a dummy instance.
I understand Generics is for compile time typechecking, but is there a workaround for this?

                
    
        How do you specify the username and password for a JDBC connection when acessing a secure database?

                
    
        How would I be able to accomplish the following:

public class testClass implements Interface {
     public testClass(Interface[] args) {
     }
}


So that I could declare 

Interface testObject = new testClass(new class1(4), new class2(5));


Where class1 and class2 are also classes that implement Interface.

Also, once I accomplish this, how would I be able to refer to each individual parameter taken in to be used in testClass?

Thanks :)

                
    
        Does c# have its own version of the java "synchronized" keyword? 

I.e. in java it can be specified either to a function, an object or a block of code, like so:

public synchronized void doImportantStuff() {
   // dangerous code goes here.
}


or

public void doImportantStuff() {
   // trivial stuff

   synchronized {
      // dangerous code goes here.
   }
}


                
    
        How could I "intercept" Ctrl+C (which normally would kill the process)
in a CLI (command line interface) Java application?

Does a multi-platform solution exist (Linux, Solaris, Windows)?

I'm using Console's readLine(), but if necessary, I could use some other method
to read characters from standard input.

                
    
        Yesterday I had a two-hour technical phone interview (which I passed, woohoo!), but I completely muffed up the following question regarding dynamic binding in Java.  And it's doubly puzzling because I use to teach this concept to undergraduates when I was a TA a few years ago, so the prospect that I gave them misinformation is a little disturbing...

Here's the problem I was given:

/* What is the output of the following program? */

public class Test {

  public boolean equals( Test other ) {
    System.out.println( "Inside of Test.equals" );
    return false;
  }

  public static void main( String [] args ) {
    Object t1 = new Test();
    Object t2 = new Test();
    Test t3 = new Test();
    Object o1 = new Object();

    int count = 0;
    System.out.println( count++ );// prints 0
    t1.equals( t2 ) ;
    System.out.println( count++ );// prints 1
    t1.equals( t3 );
    System.out.println( count++ );// prints 2
    t3.equals( o1 );
    System.out.println( count++ );// prints 3
    t3.equals(t3);
    System.out.println( count++ );// prints 4
    t3.equals(t2);
  }
}


I asserted that the output should have been two separate print statements from within the overridden equals() method: at t1.equals(t3) and t3.equals(t3).  The latter case is obvious enough, and with the former case, even though t1 has a reference of type Object, it is instantiated as type Test, so dynamic binding should call the overridden form of the method.

Apparently not.  My interviewer encouraged me to run the program myself, and lo and behold, there was only a single output from the overridden method: at the line t3.equals(t3).

My question then is, why?  As I mentioned already, even though t1 is a reference of type Object (so static binding would invoke Object's equals() method), dynamic binding should take care of invoking the most specific version of the method based on the instantiated type of the reference.  What am I missing?

                
    
        I am doing my first steps with GWT.
I have a question after reading:


<a href="http://code.google.com/webtoolkit/articles/mvp-architecture.html" rel="nofollow">Large scale application development and MVP
<a href="http://code.google.com/webtoolkit/articles/mvp-architecture-2.html" rel="nofollow">Large scale application development and MVP - Part II


In the first example the Presenter defines the interface for the View.

public class ContactsPresenter implements Presenter {
  ...
  public interface Display extends HasValue&lt;List&lt;String&gt;&gt; {
    HasClickHandlers getAddButton();
    HasClickHandlers getDeleteButton();
    HasClickHandlers getList();
    void setData(List&lt;String&gt; data);
    int getClickedRow(ClickEvent event);
    List&lt;Integer&gt; getSelectedRows();
    Widget asWidget();
  }
}


And in the second one, the View defines the interface for the Presenter.

public interface ContactsView&lt;T&gt; {

  public interface Presenter&lt;T&gt; {
    void onAddButtonClicked();
    void onDeleteButtonClicked();
    void onItemClicked(T clickedItem);
    void onItemSelected(T selectedItem);
  }

  void setPresenter(Presenter&lt;T&gt; presenter);
  void setColumnDefinitions(List&lt;ColumnDefinition&lt;T&gt;&gt; columnDefinitions);
  void setRowData(List&lt;T&gt; rowData);
  Widget asWidget();
}


What's the idea of this difference?

Which should I choose?

                
    
        I have a JAX-RS web service implemented with Jersey library and now I want to test it. In order to do that I'd like to host this service in my test by preinitializing it with mocked services.

What is the best way to host such a service and execute the test calls?

@Path("/srv")
public class MyService
{
   @GET
   public void action(@Context UriInfo uri)
   { ... }
}

@Test
public void myTest()
{
   MyService service = new MyService();
   service.setSomething(...);

   // How do I host it?

   // How do I call it?
}


                
    
        What is this "Execute Around" idiom (or similar) I've been hearing about? Why might I use it, and why might I not want to use it?

                
    
        I want to store an image in a MySQL database. I have created a table with a BLOB datatype, but now how do I store the image in this table?

                
    
        The toArray method in ArrayList , Bloch uses both System.arraycopy and Arrays.copyOf to copy an array .

public &lt;T&gt; T[] toArray(T[] a) {
  if (a.length &lt; size)
        // Make a new array of a's runtime type, but my contents:
        return (T[]) Arrays.copyOf(elementData, size, a.getClass());
    System.arraycopy(elementData, 0, a, 0, size);
    if (a.length &gt; size)
        a[size] = null;
    return a;
}


How to compare these two copy methods , when to use which ? Thanks.

                
    
        This question is somewhat related to <a href="http://stackoverflow.com/questions/305880/hibernate-annotation-placement-question">http://stackoverflow.com/questions/305880/hibernate-annotation-placement-question.

But I want to know which is better? Access via properties or access via fields?
What are the advantages and disadvantages of each?

                
    
        I have two tables: Ta and Tb. They have exactly the same table structure but different table names.

I try to create one entity class to map the table structures.  Some of my common application modules will use this entity class to dynamically query and update either Ta or Tb based on parameters.  Can it be done in JPA?  How can I write the program to dynamically mapping the entity class to different tables at run time?

                
    
        Java has the generic keyword and C++ provides a very strong programming model with templates.
So then, what is the difference between C++ and Java generics?

                
    
        What would be the easiest way to detach a specific JPA Entity Bean that was acquired through an EntityManager. Alternatively, could I have a query return detached objects in the first place so they would essentially act as 'read only'?

The reason why I want to do this is becuase I want to modify the data within the bean - with in my application only, but not ever have it persisted to the database. In my program, I eventually have to call flush() on the EntityManager, which would persist all changes from attached entities to the underyling database, but I want to exclude specific objects.

                
    
        how can I set a Hibernate Parameter to "null"? Example:

Query query = getSession().createQuery("from CountryDTO c where c.status = :status  and c.type =:type")
.setParameter("status", status, Hibernate.STRING)
.setParameter("type", type, Hibernate.STRING);


In my case, the status String can be null. I have debugged this and hibernate then generates an SQL string/query like this ....status = null... This however does not Work in MYSQL, as the correct SQL statement must be "status is null" (Mysql does not understand status=null and evaluates this to false so that no records will ever be returned for the query, according to the mysql docs i have read...) 

My Questions:


Why doesnt Hibernat translate a null string correctly to "is null" (and rather and wrongly creates "=null")?
What is the best way to rewrite this query so that it is null-safe? With nullsafe I mean that in the case that the "status" String is null than it should create an "is null"?


Thank you very much!
Tim

                
    
        I have the following :

Runnable done = new Runnable()
    {
        public void run()
        {
            System.out.println("Hello");
        }
    };


And then in my Android activity I'll call something like : 

runOnUIThread(done);


Which I then call. However, I want that "Hello" not to be hardcoded, so I can pass it in. Otherwise I'll have to have one of these declarations for every String I want to print.

(This is actually an android question, but slimmed it down to basic Java so its easier to answer)

Thanks

                
    
        When I search the web for inserting BLOBs into Oracle database with jdbc thin driver, most of the webpages suggest a 3-step approach:


insert empty_blob() value.
select the row with for update.
insert the real value.


This works fine for me, here is an example:

Connection oracleConnection = ...

byte[] testArray = ...

PreparedStatement ps = oracleConnection.prepareStatement(
    "insert into test (id, blobfield) values(?, empty_blob())");
ps.setInt(1, 100);
ps.executeUpdate();
ps.close();
ps = oracleConnection.prepareStatement(
    "select blobfield from test where id = ? for update");
ps.setInt(1, 100);
OracleResultSet rs = (OracleResultSet) ps.executeQuery();
if (rs.next()) {
    BLOB blob = (BLOB) rs.getBLOB(1);
    OutputStream outputStream = blob.setBinaryStream(0L);
    InputStream inputStream = new ByteArrayInputStream(testArray);
    byte[] buffer = new byte[blob.getBufferSize()];
    int byteread = 0;
    while ((byteread = inputStream.read(buffer)) != -1) {
        outputStream.write(buffer, 0, byteread);
    }
    outputStream.close();
    inputStream.close();
}


There are some webpages where the authors suggest using a simpler 1-step solution. Previous example with this solution:

Connection oracleConnection = ...

byte[] testArray = ...

PreparedStatement ps = oracleConnection.prepareStatement(
    "insert into test(id, blobfield) values(?, ?)");
BLOB blob = BLOB.createTemporary(oracleConnection, false, BLOB.DURATION_SESSION);
OutputStream outputStream = blob.setBinaryStream(0L);
InputStream inputStream = new ByteArrayInputStream(testArray);
byte[] buffer = new byte[blob.getBufferSize()];
int byteread = 0;
while ((byteread = inputStream.read(buffer)) != -1) {
    outputStream.write(buffer, 0, byteread);
}
outputStream.close();
inputStream.close();

ps.setInt(1, 100);
ps.setBlob(2, blob);
ps.executeUpdate();
ps.close();


The second code is much more easier, so my question is: What is the point of first (popular) solution? Is there (was there) some kind of constraint for the second solution (Oracle server version number, jdbc driver version, size of the blob,...)? Is the first solution better (speed, memory consumption,...)? Any reasons for not using the simpler second approach?

The exact same question applies for CLOB fields.

                
    
        Is there a not so ugly way of treat the close() exception to close both streams then:

    InputStream in = new FileInputStream(inputFileName);
    OutputStream out = new FileOutputStream(outputFileName);

    try {
    copy(in, out);
    } finally {
    try {
        in.close();
    } catch (Exception e) {
        try {
        // event if in.close fails, need to close the out
        out.close();
        } catch (Exception e2) {}
        throw e; // and throw the 'in' exception
    }
    out.close();
    }


update: All the above code is within one more try-catch, thanks for the warnings.

--FINALLY (after the answers)

And a good utility method can be done using <a href="http://stackoverflow.com/questions/341971/what-is-the-execute-around-idiom">Execute Around idiom (thanks Tom Hawtin).

                
    
        I see that Google App Engine can host  web applications that will return html, etc. But what about web services that communicate over http and accept / return xml?

Does anyone know how this is being done in Goggle App Engine with Python or for that matter in Java (JAS-WX is not supported)? Any links o samples or articles is greatly appreciated.

Thanks // :)

                
    
        I parse a big xml document with Sax, I want to stop parsing the document when some condition establish? How to do?

                
    
        I am having a lot of trouble finding good information on how to call a standard SOAP/WSDL web service with Android. All I've been able to find are either very convoluted documents and references to "kSoap2" and then some bit about parsing it all manually with <a href="http://en.wikipedia.org/wiki/Simple_API_for_XML" rel="nofollow">SAX. OK, that's fine, but it's 2008 so I figured there should be some good library for calling standard web services.

The web service is just basically one created in <a href="http://en.wikipedia.org/wiki/NetBeans" rel="nofollow">NetBeans. I would like to have IDE support for generating the plumbing classes. I just need the easiest/most-elegant way to contact a <a href="http://en.wikipedia.org/wiki/Web_Services_Description_Language" rel="nofollow">WSDL based web service from an Android based phone.

                
    
        What's a simple/easy way to access the system clock using Java, so that I can calculate the elapsed time of an event?

                
    
        What is the smartest way to get an entity with a field of type List get persisted?

Command.java

package persistlistofstring;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.persistence.Basic;
import javax.persistence.Entity;
import javax.persistence.EntityManager;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Persistence;

@Entity
public class Command implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    Long id;
    @Basic
    List&lt;String&gt; arguments = new ArrayList&lt;String&gt;();

    public static void main(String[] args) {
        Command command = new Command();

        EntityManager em = Persistence
                .createEntityManagerFactory("pu")
                .createEntityManager();
        em.getTransaction().begin();
        em.persist(command);
        em.getTransaction().commit();
        em.close();

        System.out.println("Persisted with id=" + command.id);
    }
}


<hr />

This code produces:

&gt; Exception in thread "main" javax.persistence.PersistenceException: No Persistence provider for EntityManager named pu: Provider named oracle.toplink.essentials.PersistenceProvider threw unexpected exception at create EntityManagerFactory: 
&gt; oracle.toplink.essentials.exceptions.PersistenceUnitLoadingException
&gt; Local Exception Stack: 
&gt; Exception [TOPLINK-30005] (Oracle TopLink Essentials - 2.0.1 (Build b09d-fcs (12/06/2007))): oracle.toplink.essentials.exceptions.PersistenceUnitLoadingException
&gt; Exception Description: An exception was thrown while searching for persistence archives with ClassLoader: sun.misc.Launcher$AppClassLoader@11b86e7
&gt; Internal Exception: javax.persistence.PersistenceException: Exception [TOPLINK-28018] (Oracle TopLink Essentials - 2.0.1 (Build b09d-fcs (12/06/2007))): oracle.toplink.essentials.exceptions.EntityManagerSetupException
&gt; Exception Description: predeploy for PersistenceUnit [pu] failed.
&gt; Internal Exception: Exception [TOPLINK-7155] (Oracle TopLink Essentials - 2.0.1 (Build b09d-fcs (12/06/2007))): oracle.toplink.essentials.exceptions.ValidationException
&gt; Exception Description: The type [interface java.util.List] for the attribute [arguments] on the entity class [class persistlistofstring.Command] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface.
&gt;         at oracle.toplink.essentials.exceptions.PersistenceUnitLoadingException.exceptionSearchingForPersistenceResources(PersistenceUnitLoadingException.java:143)
&gt;         at oracle.toplink.essentials.ejb.cmp3.EntityManagerFactoryProvider.createEntityManagerFactory(EntityManagerFactoryProvider.java:169)
&gt;         at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:110)
&gt;         at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
&gt;         at persistlistofstring.Command.main(Command.java:30)
&gt; Caused by: 
&gt; ...


                
    
        This is a follow up to my <a href="http://stackoverflow.com/questions/490792/error-1053-while-trying-to-restart-stop-tomcat-5-0-30-installed-as-a-windows-ser">earlier question.

Tomcat 5.0.28 had a bug where the Servlet's destroy() method was not being invoked by the container on a shutdown. This is fixed in Tomcat 5.0.30, but if the Servlet's destroy() method had a System.exit(), it would result in the Tomcat windows service throwing the Error 1053 and refusing to shutdown gracefully (see above link for more details on this error)

Anybody has any idea on whether:


Calling System.exit() inside a Servlet's destroy() method to forcefully kill any non-daemon threads is a good idea?
Why does Tomcat 5.0.30 and (later versions including Tomcat 6.x.x) fail to shutdown properly if there's a System.exit() in the destroy() method of the Servlet.


                
    
        how I can rewrite this:

for (int i = 0; i &lt; numberOfSpaces; i++) {
    System.out.print(" ");
}


using String.format()?

PS

I'm pretty sure that this is possible but the <a href="http://java.sun.com/javase/6/docs/api/java/util/Formatter.html#syntax" rel="nofollow">javadoc is a bit confusing.

                
    
        Suppose I have following string:

String asd = "this is test ass this is test"


and I want to split the string using "ass" character sequence.

I used:

asd.split("ass");


It doesn't work. What do I need to do?

                
    
        Is there a standard and reliable way of creating a temporary directory inside a Java application? There's <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4735419" rel="nofollow">an entry in Sun's issue database, which has a bit of code in the comments, but I wonder if there is a standard solution to be found in one of the usual libraries (Apache Commons etc.)

                
    
        Can an abstract class have a constructor? If so, how it can be used and for what purposes?

                
    
        It looks like a standard question, but I couldn't find clear directions anywhere.

I have java code trying to connect server with probably self-signed (or expired) certificate. It gives something like this

[HttpMethodDirector] I/O exception (javax.net.ssl.SSLHandshakeException) caught when processing request: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target


As I understand, I have to play around with keytool and tell java that it's ok to allow this connection. But all comments I've found assume I'm fully proficient with keytool, like "generate private key for server and import it into keystore". And I'm not. Is there anybody who could post detailed instructions?
I'm running unix, so bash script would be best.

Not sure if it's important, but code executed in jboss.

Thanks a lot!

                
    
        What is the difference between a hashmap and a hashtable in Java, and which is more efficient for non-threaded applications?

                
    
        Consider the following code:

public class ReadingTest {

    public void readAndPrint(String usingEncoding) throws Exception {
        ByteArrayInputStream bais = new ByteArrayInputStream(new byte[]{(byte) 0xC2, (byte) 0xB5}); // 'micro' sign UTF-8 representation
        InputStreamReader isr = new InputStreamReader(bais, usingEncoding);
        char[] cbuf = new char[2];
        isr.read(cbuf);
        System.out.println(cbuf[0]+" "+(int) cbuf[0]);
    }

    public static void main(String[] argv) throws Exception {
        ReadingTest w = new ReadingTest();
        w.readAndPrint("UTF-8");
        w.readAndPrint("US-ASCII");
    }
}


Observed output:

 181
? 65533


Why does the second call of readAndPrint() (the one using US-ASCII) succeed? I would expect it to throw an error, since the input is not a proper character in this encoding. What is the place in the Java API or JLS which mandates this behavior?

                
    
        What is the best way to iterate through a HashMap?

                
    
        I have an application using hibernate 3.1 and JPA annotations.  It has a few objects with byte[] attributes (1k - 200k in size).  It uses the JPA @Lob annotation, and hibernate 3.1 can read these just fine on all major databases -- it seems to hide the JDBC Blob vendor peculiarities (as it should do).

@Entity
public class ConfigAttribute {
  @Lob
  public byte[] getValueBuffer() {
    return m_valueBuffer;
  }
}


We had to upgrade to 3.5, when we discovered that hibernate 3.5  <a href="http://opensource.atlassian.com/projects/hibernate/browse/HHH-4876">breaks (and won't fix) this annotation combination in postgresql (with no workaround).  I have not found a clear fix so far, but I did notice that if I just remove the @Lob, it uses the postgresql type bytea (which works, but only on postgres).

annotation                   postgres     oracle      works on
-------------------------------------------------------------
byte[] + @Lob                oid          blob        oracle
byte[]                       bytea        raw(255)    postgresql
byte[] + @Type(PBA)          oid          blob        oracle
byte[] + @Type(BT)           bytea        blob        postgresql

once you use @Type, @Lob seems to not be relevant
note: oracle seems to have deprecated the "raw" type since 8i.


I am looking for a way to have a single annotated class (with a blob property) which is portable across major databases.


What is the portable way to annotate a byte[] property?
Is this fixed in some recent version of hibernate?


Update:
After reading <a href="http://in.relation.to/Bloggers/PostgreSQLAndBLOBs#comment15505">this blog I have finally figured out what the original workaround in the JIRA issue was: Apparently you are supposed to drop @Lob and annotate the property as:

@Type(type="org.hibernate.type.PrimitiveByteArrayBlobType") 
byte[] getValueBuffer() {...


However, this does not work for me -- I still get OIDs instead of bytea; it did however work for the author of the JIRA issue, who seemed to want oid.

After the answer from A. Garcia, I then tried this combo, which actually does work on postgresql, but not on oracle.

@Type(type="org.hibernate.type.BinaryType") 
byte[] getValueBuffer() {...


What I really need to do is control which @org.hibernate.annotations.Type the combination (@Lob + byte[] gets mapped) to (on postgresql).



Here is the snippet from 3.5.5.Final from MaterializedBlobType (sql type Blob).  According to Steve's blog, postgresql wants you to use Streams for bytea (don't ask me why) and postgresql's custom Blob type for oids.  Note also that using setBytes() on JDBC is also for bytea (from past experience).  So this explains why use-streams has no affect they both assume 'bytea'.

public void set(PreparedStatement st, Object value, int index) {
 byte[] internalValue = toInternalFormat( value );
 if ( Environment.useStreamsForBinary() ) {
  // use streams = true
   st.setBinaryStream( index, 
    new ByteArrayInputStream( internalValue ), internalValue.length );
 }
 else {
  // use streams = false
  st.setBytes( index, internalValue );
 }
}


This results in:

ERROR: column "signature" is of type oid but expression is of type bytea


Update
The next logical question is: "why not just change the table definitions manually to bytea" and keep the (@Lob + byte[])?  This does work, UNTIL you try to store a null byte[].  Which the postgreSQL driver thinks is an OID type expression and the column type is bytea -- this is because hibernate (rightly) calls JDBC.setNull() instead of JDBC.setBytes(null) which PG driver expects. 

ERROR: column "signature" is of type bytea but expression is of type oid


The type system in hibernate is currently a 'work in progress' (according to 3.5.5 deprecation comment).  In fact so much of the 3.5.5 code is deprecated, it is hard to know what to look at when sub-classing the PostgreSQLDialect).  

AFAKT, Types.BLOB/'oid' on postgresql should be mapped to some custom type which uses OID style JDBC access (i.e. PostgresqlBlobType object and NOT MaterializedBlobType).  I've never actually successfully used Blobs with postgresql, but I do know that bytea just simply works as one / I would expect.

I am currently looking at the BatchUpdateException -- its possible that the driver doesn't support batching.  



Great quote from 2004:
 "To sum up my ramblings, I'd say they we should wait for the JDBC driver to do LOBs properly before changing Hibernate."

References:


<a href="https://forum.hibernate.org/viewtopic.php?p=2393203">https://forum.hibernate.org/viewtopic.php?p=2393203
<a href="https://forum.hibernate.org/viewtopic.php?p=2435174">https://forum.hibernate.org/viewtopic.php?p=2435174
<a href="http://opensource.atlassian.com/projects/hibernate/browse/HHH-4617">http://opensource.atlassian.com/projects/hibernate/browse/HHH-4617
<a href="http://opensource.atlassian.com/projects/hibernate/browse/HHH-4617">http://opensource.atlassian.com/projects/hibernate/browse/HHH-4617
<a href="http://postgresql.1045698.n5.nabble.com/Migration-to-Hibernate-3-5-final-td2175339.html">http://postgresql.1045698.n5.nabble.com/Migration-to-Hibernate-3-5-final-td2175339.html
<a href="https://jira.springframework.org/browse/SPR-2318">https://jira.springframework.org/browse/SPR-2318
<a href="https://forums.hibernate.org/viewtopic.php?p=2203382&amp;sid=b526a17d9cf60a80f13d40cf8082aafd">https://forums.hibernate.org/viewtopic.php?p=2203382&amp;sid=b526a17d9cf60a80f13d40cf8082aafd
<a href="http://virgo47.wordpress.com/2008/06/13/jpa-postgresql-and-bytea-vs-oid-type/">http://virgo47.wordpress.com/2008/06/13/jpa-postgresql-and-bytea-vs-oid-type/


                
    
        In Spring Framework , AbstractWizardFormController seems deprecated. How to implement multiple pages form in the Spring MVC Framework. (I am not using webflow)

any example or pointer  would help considering my limited knowledge in Spring.

                
    
        Does Java 6 consume more memory than you expect for largish applications?

I have an application I have been developing for years, which has, until now taken about 30-40 MB in my particular test configuration; now with Java 6u10 and 11 it is taking several hundred while active.  It bounces around a lot, anywhere between 50M and 200M, and when it idles, it does GC and drop the memory right down.  In addition it generates millions of page faults.  All of this is observed via Windows Task Manager.

So, I ran it up under my profiler (jProfiler) and using jVisualVM, and both of them indicate the usual moderate heap and perm-gen usages of around 30M combined, even when fully active doing my load-test cycle.

So I am mystified! And it not just requesting more memory from the Windows Virtual Memory pool - this is showing up as 200M "Mem Usage".

CLARIFICATION: I want to be perfectly clear on this - observed over an 18 hour period with Java VisualVM the class heap and perm gen heap have been perfectly stable.  The allocated volatile heap (eden and tenured) sits unmoved at 16MB (which it reaches in the first few minutes), and the use of this memory fluctuates in a perfect pattern of growing evenly from 8MB to 16MB, at which point GC kicks in an drops it back to 8MB.  Over this 18 hour period, the system was under constant maximum load since I was running a stress test.  This behavior is perfectly and consistently reproducible, seen over numerous runs.  The only anomaly is that while this is going on the memory taken from Windows, observed via Task Manager, fluctuates all over the place from 64MB up to 900+MB.

UPDATE 2008-12-18: I have run the program with -Xms16M -Xmx16M without any apparent adverse affect - performance is fine, total run time is about the same.  But memory use in a short run still peaked at about 180M.

Update 2009-01-21: It seems the answer may be in the number of threads - see my answer below.



EDIT: And I mean millions of page faults literally - in the region of 30M+.

EDIT: I have a 4G machine, so the 200M is not significant in that regard.

                
    
        i just started using Uploadify flash plugin instead of standard HTML UI.
And met the next problem:
when I click "Upload Files" link,that progress is shown and "completed" status is appeared, but in reality - it didn't happened anything,Java Servlet isn't called from backend.
There is upload servlet and uploading performed next way earlier:

&lt; form enctype="multipart/form-data" method="post" target="uploadFrame"
action="&lt;%= request.getContextPath() %&gt;/uploadFile?portletId=${portletId}&amp;remoteFolder=${remoteFolder}"&gt;...


After providing Uploadify plugin, UI now looks like:

plugin part(configuration):

    &lt;script&gt;
...  
         oScript.text+= "$j('#uploadify').uploadify({";
      oScript.text+= "'uploader' : 'kne-portlets/js/lib/uploadify/scripts/uploadify.swf',";
      oScript.text+= "'script'   : '&lt;%= request.getContextPath() %&gt;/uploadFile?portletId=${portletId}&amp;remoteFolder=&lt;%= decodedString %&gt;',";
      oScript.text+= "'cancelImg': 'kne-portlets/js/lib/uploadify/cancel.png',";
      oScript.text+= "'folder'   : '&lt;%= decodedString %&gt;',";
      oScript.text+= "'queueID'  : 'fileQueue',";
      oScript.text+= "'auto'     : false,";
      oScript.text+= "'multi'    : false,";
      //oScript.text+= "'sizeLimit' : 1000";
      oScript.text+= "});";
      oScript.text+= "});"; 
...   
&lt;/script&gt;


'scripts' parameter here points to Java Servlet on backend

&lt;%= decodedString %&gt; is folder path, which value is \\file-srv\demo

part for uploading:

&lt;input type="file" name="uploadify" id="uploadify" /&gt;
&lt;a href="javascript:$j('#uploadify').uploadifyUpload();"&gt;Upload Files&lt;/a&gt;


Where is my fault?

'Script' param in plugin config points to Java Servlet on backend and it's done,but Servlet isn't triggered.

error, when 'script' param isn't correct:<a href="http://img190.imageshack.us/i/errormm.png/" rel="nofollow">http://img190.imageshack.us/i/errormm.png/

Thank you for assistance.

                
    
        I'm at the beginning/middle of a project that we chose to implement using GWT. Has anyone encountered any major pitfalls in using GWT (and GWT-EXT) that were unable to be overcome? How about from a performance perspective?

A couple things that we've seen/heard already include:


Google not being able to index content
CSS and styling in general seems to be a bit flaky


Looking for any additional feedback on these items as well. Thanks!

                
    
        I need to get UTF-8 working in my Java webapp (servlets + JSP, no framework used) to support  etc. for regular Finnish text and Cyrillic alphabets like ??? for special cases.

My setup is the following:


Development encironment: Windows XP
Production encironment: Debian


Database used: MySQL 5.x

Users mainly use Firefox2 but also Opera 9.x, FF3, IE7 and Google Chrome are used to access the site.

How to achieve this?

                
    
        In the process of converting a C# application to Java, I came across the use of String's TrimEnd method. Is there an equivalent Java implementation? I can't seem to find one.

I'd rather not replace it with trim, since I don't want to change the meaning or operation of the program at this point unless I have to.

                
    
        I'm currently working on a simple game in Java with several different modes. I've extended a main Game class to put the main logic within the other classes. Despite this, the main game class is still pretty hefty.

After taking a quick look at my code the majority of it was Getters and Setters (60%) compared to the rest that is truly needed for the logic of the game.

A couple of Google searches have claimed that Getters and Setters are evil, whilst others have claimed that they are necessary for good OO practice and great programs.

What are your opinions on this? Should I be changing my Getters and Setters for my private variables or should I stick with them?

                
    
        I've got a User an a Log class (which I cannot change):

class User {
    private long id;
    private String name;
    private Set&lt;Log&gt; accessLogs;
    private Set&lt;Log&gt; actionLogs;
}

class Log {
    private String what;
    private Date when;
}


A possible mapping will look like:

&lt;class name="com.example.User" table="users"&gt;
    &lt;id name="id" access="field"&gt;
        &lt;generator class="native" /&gt;
    &lt;/id&gt;

    &lt;property name="name" length="256" /&gt;

    &lt;set name="accessLogs" table="user_access_logs" cascade="all-delete-orphan" order-by="`when`"&gt;
        &lt;key column="user_id" /&gt;
        &lt;composite-element class="com.example.Log"&gt;
            &lt;property name="what" length="512" /&gt;
            &lt;property name="when" column="`when`" /&gt;
        &lt;/composite-element&gt;
    &lt;/set&gt;

    &lt;set name="actionLogs" table="user_action_logs" cascade="all-delete-orphan" order-by="`when`"&gt;
        &lt;key column="user_id" /&gt;
        &lt;composite-element class="com.example.Log"&gt;
            &lt;property name="what" length="512" /&gt;
            &lt;property name="when" column="`when`" /&gt;
        &lt;/composite-element&gt;
    &lt;/set&gt;

&lt;/class&gt;


This works fine and maps on the following database tables:

users
+----+------+
| id | name |
+----+------+
|  1 | john |
|  2 | bill |
|  3 | nick |
+----+------+

user_access_logs
+---------+------------+---------------------+
| user_id | what       | when                |
+---------+------------+---------------------+
|       1 | logged in  | 2010-09-21 11:25:03 |
|       1 | logged out | 2010-09-21 11:38:24 |
|       1 | logged in  | 2010-09-22 10:19:39 |
|       2 | logged in  | 2010-09-22 11:03:18 |
|       1 | logged out | 2010-09-22 11:48:16 |
|       2 | logged in  | 2010-09-26 12:45:18 |
+---------+------------+---------------------+

user_action_logs
+---------+---------------+---------------------+
| user_id | what          | when                |
+---------+---------------+---------------------+
|       1 | edit profile  | 2010-09-21 11:28:13 |
|       1 | post comment  | 2010-09-21 11:30:40 |
|       1 | edit profile  | 2010-09-21 11:31:17 |
|       1 | submit link   | 2010-09-22 10:21:02 |
|       2 | submit review | 2010-09-22 11:10:22 |
|       2 | submit link   | 2010-09-22 11:11:39 |
+---------+---------------+---------------------+


My question is how is it possible in hibernate to map those 2 sets (accessLogs and actionLogs) into the same table producing the following schema for the logs:

user_logs
+---------+---------------+---------------------+--------+
| user_id | what          | when                | type   |
+---------+---------------+---------------------+--------+
|       1 | logged in     | 2010-09-21 11:25:03 | access |
|       1 | edit profile  | 2010-09-21 11:28:13 | action |
|       1 | post comment  | 2010-09-21 11:30:40 | action |
|       1 | edit profile  | 2010-09-21 11:31:17 | action |
|       1 | logged out    | 2010-09-21 11:38:24 | access |
|       1 | logged in     | 2010-09-22 10:19:39 | access |
|       1 | submit link   | 2010-09-22 10:21:02 | action |
|       2 | logged in     | 2010-09-22 11:03:18 | access |
|       2 | submit review | 2010-09-22 11:10:22 | action |
|       2 | submit link   | 2010-09-22 11:11:39 | action |
|       1 | logged out    | 2010-09-22 11:48:16 | access |
|       2 | logged in     | 2010-09-26 12:45:18 | access |
+---------+---------------+---------------------+--------+


Edit: I want to retain the Java code and Set semantics as is. I'm looking for something like a discriminator, a formula or a hibernate API extension which will solve this without touching the Java code. Maybe something along the lines (imaginary hibernate configuration follows):

&lt;set name="accessLogs" table="user_logs" ... formula="type='access'"&gt;
    &lt;key column="user_id" /&gt;
    &lt;composite-element class="Log"&gt;
        ...
    &lt;/composite-element&gt;
&lt;/set&gt;

&lt;set name="actionLogs" table="user_logs" ... formula="type='action'"&gt;
    &lt;key column="user_id" /&gt;
    &lt;composite-element class="Log"&gt;
        ...
    &lt;/composite-element&gt;
&lt;/set&gt;


Edit2: I haven't got a full solution to this yet. I'm sure it can be done, possibly by extending some hibernate API.

thanks

                
    
        One challenge using hibernate is that manged classes have to have a default constructor. The problem is that there is no explicit point where the class is initialized and invariants can be checked. 

If a class has invariants that depend on more than one property the class design gets complex. Let's start with the hypothetical green-field design: 

public class A { 
    private int x; 
    private int y; 

    public A(int x, int y) { 
        this.x = x; 
        this.y = y; 
        checkInvariants(this.x, this.y); 
    } 

    private void checkInvariants(int x, int y) { 
        if (x + y  0) throw new IllegalArgumentException(); 
    } 
}


This is the base implementation that does not meet the hibernate requirements. The invariant is checked in the constructor. (The content of the checkInvariants() method does not matter it's only presented to illustrate that the class invariants can depend on more that one property.) 

The class can be used as follows: 

new A(0, 0); 
new A(-1, 0); //invalid


To meet the hibernate requirements one workaround is to add a private default constructor and use field access. (I omitted the hibernate mappings.) 

public class H { 
    int x; 
    int y; 

    public H(int x, int y) { 
        this.x = x; 
        this.y = y; 
        checkInvariants(this.x, this.y); 
    } 

    H(){} 

    private void checkInvariants(int x, int y) { 
        if (x + y  0) throw new IllegalArgumentException(); 
    } 
}


This has two major drawbacks: 
 * You're starting to implement code that depends on the client (Hibernate). Ideally, a class does not know its callers. 
 * A specific issue with this workaround is that instances initiated by hibernate are not checked if the meet the invariants. You're trusting data that is loaded from the database which is problematic. Even if your application is the only one using this specific database schema there is always the possibility of ad-hoc changes by administrators. 

A second workaround is to check invariants in user code: 

public class I { 
    private int x; 
    private int y; 

    public I() {} 

    public void checkInvariants() { 
        if (x + y  0) throw new IllegalArgumentException(); 
    } 

    public void setX(int x){ 
        this.x = x; 
    } 

    public void setY(int y){ 
        this.y = y; 
    } 
} 

I i = new I(); 
i.setX(-1); 
i.setY(0); 
i.checkInvariants();


Obviously, this makes the user code more complex and error-prone. This design does not fulfill the expectation that an instance is consistent after creation and stays consistent after each change of state (method call). Every user has to check the invariants for every instance he creates (maybe indirectly with hibernate). 

Is there a better solution to this problem which is: 


not overly complex 
without explicit knowledge about its users 
without a dependency to the hibernate framework? 


I suppose some of the constraints have to be loosened to get to a pragmatic solution. The only hard constraint is that there is no dependency to the hibernate framework. (Hibernate specific code outside of domain objects is okay). 

(Just out of curiosity: is there a ORM framework that does support constructor injection?)

                
    
        What is the "purist" or "correct" way to access an object's properties from within an object method that is not a getter/setter method?

I know that from outside of the object you should use a getter/setter, but from within would you just do:

Java:

String property = this.property;


PHP:

$property = $this-&gt;property;


or would you do:

Java:

String property = this.getProperty();


PHP:

$property = $this-&gt;getProperty();


Forgive me if my Java is a little off, it's been a year since I programmed in Java...

EDIT:

It seems people are assuming I am talking about private or protected variables/properties only. When I learned OO I was taught to use getters/setters for every single property even if it was public (and actually I was told never to make any variable/property public). So, I may be starting off from a false assumption from the get go. It appears that people answering this question are maybe saying that you should have public properties and that those don't need getters and setters, which goes against what I was taught, and what I was talking about, although maybe that needs to be discussed as well. That's probably a good topic for a different question though...

                
    
        When using JDBC and accessing primitive types via a result set, is there a more elegant way to deal with the null/0 than the following:

int myInt = rs.getInt(columnNumber)
if(rs.wasNull())?
{
 // Treat as null
} else
{
 // Treat as 0
}


I personally cringe whenever I see this sort of code. I fail to see why ResultSet was not defined to return the boxed integer types (except, perhaps, performance) or at least provide both. Bonus points if anyone can convince me that the current API design is great :) 

My personal solution was to write a wrapper that returns an Integer (I care more about elegance of client code than performance), but I'm wondering if I'm missing a better way to do this. 

Just to clarify, what bothers me about this code is not the length, but the fact that a it creates a state dependency between subsequent calls, and what appears like a simple getter actually has a side effect within the same row. 

                
    
        I have a method that creates a MessageDigest (a hash) from a file, and I need to do this to a lot of files (>= 100,000). How big should I make the buffer used to read from the files to maximize performance?

Most everyone is familiar with the basic code (which I'll repeat here just in case):

MessageDigest md = MessageDigest.getInstance( "SHA" );
FileInputStream ios = new FileInputStream( "myfile.bmp" );
byte[] buffer = new byte[4 * 1024]; // what should this value be?
int read = 0;
while( ( read = ios.read( buffer ) ) &gt; 0 )
    md.update( buffer, 0, read );
ios.close();
md.digest();


What is the ideal size of the buffer to maximize throughput? I know this is system dependent, and I'm pretty sure its OS, FileSystem, and HDD dependent, and there maybe other hardware/software in the mix. 

(I should point out that I'm somewhat new to Java, so this may just be some Java API call I don't know about.)

Edit: I do not know ahead of time the kinds of systems this will be used on, so I can't assume a whole lot. (I'm using Java for that reason.)

Edit: The code above is missing things like try..catch to make the post smaller

                
    
        Is there a way to shutdown a computer using a built-in Java method?

                
    
        I'm putting together a quick and dirty animation using swing (hehehe).  I would like the window to be maximized.  How can I do that?

Thanks in advance :)

                
    
        While making a map generator in Java I found a rather unnerving problem with their random number generator, to specify, when two RNGs have very similar seeds (differing in small integers) their first output value will become very similar!

Example code:

Random r = new Random();
long n = 100000; //Choose any number
r.setSeed(n);  
System.out.println(r.nextInt());
r.setSeed(n+1);
System.out.println(r.nextInt());


This pretty much broke my faith in the original Java RNG, since I use coordinates to seed a map generator.
Could someone suggest either a redefinition for the Random.next(int bits) method, or some other fix for this problem?

Thank you for your help!

                
    
        There are lots of threads about this type of question, but I want to get a complete answer and actually understand it without 'hiding' the problem with a @SupressWarnings !

I have the following class (from a simple Spring tutorial)

public class CarValidator implements Validator {

public boolean supports(Class aClass) {
	return Car.class.equals(aClass);
}

public void validate(Object obj, Errors errors) {
	Car car = (Car) obj;

	ValidationUtils.rejectIfEmptyOrWhitespace(errors, "model", "field.required", "Required field");

	ValidationUtils.rejectIfEmptyOrWhitespace(errors, "price", "field.required", "Required field");

	if( ! errors.hasFieldErrors("price")) {
		if (car.getPrice().intValue() == 0)
			errors.rejectValue("price", "not_zero", "Can't be free!");
	}

}


}

Where the Validator class is the org.springframework.validation.Validator class from Spring 2.5.

The supports method is showing a warning (Class is a raw type. References to generic type Class should be parameterized), if I try to add parameters to this such as 

public boolean supports(Class&lt;?&gt; aClass) ...


I get the follwing error:

The method supports(Class) of type CarValidator has the same erasure as supports(Class) of type Validator but does not override it

I would be very grateful if someone could fully explain this please and put me out of my misery. 

My applogies in advance, I've been in a 1.4 world for too long!

                
    
        I'm looking for the different ways to map an enum using JPA. I especially want to set the integer value of each enum entry and to save only the integer value.

@Entity
@Table(name = "AUTHORITY_")
public class Authority implements Serializable {

  public enum Right {
      READ(100), WRITE(200), EDITOR (300);

      private int value;

      Right(int value) { this.value = value; }

      public int getValue() { return value; }
  };

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Column(name = "AUTHORITY_ID")
  private Long id;

  // the enum to map : 
  private Right right;
}


A simple solution is to use the Enumerated annotation with EnumType.ORDINAL:

@Column(name = "RIGHT")
@Enumerated(EnumType.ORDINAL)
private Right right;


But in this case JPA maps the enum index (0,1,2) and not the value I want (100,200,300).

Th two solutions I found do not seem simple...

First Solution

A solution, <a href="http://forums.java.net/jive/thread.jspa?threadID=32048" rel="nofollow">proposed here, uses @PrePersist and @PostLoad to convert the enum to an other field and mark the enum field as transient:

@Basic
private int intValueForAnEnum;

@PrePersist
void populateDBFields() {
  intValueForAnEnum = right.getValue();
}

@PostLoad
void populateTransientFields() {
  right = Right.valueOf(intValueForAnEnum);
}


Second Solution

The second solution <a href="http://appfuse.org/display/APF/Java+5+Enums+Persistence+with+Hibernate" rel="nofollow">proposed here proposed a generic conversion object, but still seems heavy and hibernate-oriented (@Type doesn't seem to exist in JEE): 

@Type(
    type = "org.appfuse.tutorial.commons.hibernate.GenericEnumUserType",
    parameters = {
            @Parameter(
                name  = "enumClass",                      
                value = "Authority$Right"),
            @Parameter(
                name  = "identifierMethod",
                value = "toInt"),
            @Parameter(
                name  = "valueOfMethod",
                value = "fromInt")
            }
)


Is there any other solutions ?

I've several ideas in mind but I don't know if they exist in JPA:


use the setter and getter methods of right member of Authority Class when loading and saving the Authority object
an equivalent idea would be to tell JPA what are the methods of Right enum to convert enum to int and int to enum
Because I'm using Spring, is there any way to tell JPA to use a specific converter (RightEditor) ?


                
    
        i make a JSF 2.0 Application and i use many h:inputText fields to input data in my database. Some fields are not required

&lt;h:inputText value="#{registerBean.user.phoneNumber}" id="phoneNumber" &gt;
                            &lt;f:validateLength maximum="20" /&gt;
                        &lt;/h:inputText&gt;&lt;br/&gt;


When the user leave this field empty JSF returns "" instead of NULL.

How can i fix this behavior without check every String with

if(string.equals(""){ string = null}


Thanks.

                
    
        I am designing a simple web based application. I am new to this web based domain.I needed your advice regarding the design patterns like how responsibility should be distributed among Servlets, criteria to make new Servlet, etc.

Actually I have few entities on my home page and corresponding to each one of them we have few options like add, edit and delete. Earlier I was using one Servlet per options like Servlet1 for add entity1, Servlet2 for edit entity1 and so on and in this way we ended up having a large number of servlets.

Now we are changing our design. My question is how you exactly choose how you choose the responsibility of a servlet. Should we have one Servlet per entity which will process all it's options and forward request to service layer.Or should we have one servlet for the whole page which will process the whole page request and then forward it to corresponding service layer.Also should the request object forwarded to service layer or not.

Please you guide us in choosing the best design.Also any pointer to a good design pattern material will be welcome.

                
    
        Is there a way to retrieve the auto generated key from a DB query when using a java query with prepared statements. 

For example, I know AutoGeneratedKeys can work as follows. 

stmt = conn.createStatement();

stmt.executeUpdate(sql, Statement.RETURN_GENERATED_KEYS);
if(returnLastInsertId) {
    ResultSet rs = stmt.getGeneratedKeys();
    rs.next();
    auto_id = rs.getInt(1);
}


However. What if I want to do an insert with a prepared Statement. 

String sql = "INSERT INTO table (column1, column2) values(?, ?)";
stmt = conn.prepareStatement(sql);

//this is an error
stmt.executeUpdate(Statement.RETURN_GENERATED_KEYS);
if(returnLastInsertId) {
    //this is an error since the above is an error
    ResultSet rs = stmt.getGeneratedKeys();
    rs.next();
    auto_id = rs.getInt(1);
}


Is there a way to do this that I don't know about. It seems from the javadoc that PreparedStatements can't return the Auto Generated ID.

                
    
        How can i find the string length without using the length() method in java

                
    
        During navigation of Method class I came across the function isBridge(), javadoc of which says, that its true only if java spec declares the method as true.

Please help me understand what this is used for ? Can a custom class declare its method as a bridge if required ?

                
    
        Sorry I can't find a question answering this, I'm almost certain someone else has raised it before. 

My problem is that I'm writing some system libraries to run embedded devices. I have commands which can be sent to these devices over radio broadcasts. This can only be done by text. inside the system libraries I have a  thread which handles the commands which looks like this

if (value.equals("A")) { doCommandA() }
else if (value.equals("B")) { doCommandB() } 
else if etc. 


The problem is that there are a lot of commands to it will quickly spiral to something out of control. Horrible to look out, painful to debug and mind boggling to understand in a few months time. 

                
    
        I'm taking a C# class right now and I'm trying to find out the best way of doing things. I come from a Java background and so I'm only familiar with Java best-practices; I'm a C# novice!

In Java if I have a private property, I do this;

private String name;

public void setName(String name) {
   this.name = name;
}

public String getName() {
   return this.name;
}


In C#, I see that there are many ways of doing this.

I can do it like Java:

private string name;

public void setName(string name) {
   this.name = name;
}

public string getName() {
   return this.name;
}


Or I can do it this way:

private string name;

public string Name {
   get { return name; }
   set { name = value; }
}


Or:

public string Name { get; set; }


Which one should I use, and what are the caveats or subtleties involved with each approach? When creating classes, I am following general best-practices that I know from Java (especially reading Effective Java). So for example, I am favoring immutability (providing setters only when necessary). I'm just curious to see how these practices fit in with the various ways of providing setters and getters in C#; essentially, how would I translate best-practices from the Java world into C#?

EDIT

I was posting this as a comment to Jon Skeet's answer but then it got long:

What about a non-trivial property (i.e., with significant processing and validation perhaps)? Could I still expose it via a public property but with the logic encapsulated in get and set? Why would/should I do this over having dedicated setter and getter methods (with associated processing and validation logic).

                
    
        I know the APIs are very different, but is there any functional difference between the built-in JavaScript stuff and the Rhino builds obtainable from Mozilla?

                
    
        I have the following EJB structure. Don't wonder about Animal and Inventory, these classes are only here to demonstrate the structure in a simplified way (Update: I have revised the class names to construct a better understandable example. Another implementation of IdTag might be a BarcodeId). Note that there is no inverse relationship from IdTag to Animal or Inventory, and let's assume the RfidTag.code is unique. I read <a href="http://stackoverflow.com/questions/3199523">Retrieving Polymorphic Hibernate Objects Using a Criteria Query and <a href="http://stackoverflow.com/questions/984805">Hibernate polymorphic query but these discussions does not seem to answer my question.

public interface ItemWithIdTag
{
    IdTag getIdTag();
    void setIdTag(IdTag idTag);
}

@Entity public class Animal implements ItemWithIdTag,Serializable
{
    @Id @GeneratedValue(strategy=GenerationType.AUTO) private long id;

    @OneToOne(cascade = CascadeType.ALL)
    private IdTag idTag;
}

@Entity public class Inventory implements ItemWithIdTag,Serializable
{
    @Id @GeneratedValue(strategy=GenerationType.AUTO) private long id;

    @OneToOne(cascade = CascadeType.ALL)
    private IdTag idTag;
}

@Entity @Table(name = "IdTag") @Inheritance(strategy= InheritanceType.JOINED)
public class IdTag implements Serializable
{
    @Id @GeneratedValue(strategy=GenerationType.AUTO) private long id;
    private Date created;
}

@Entity @Table(name = "RfidTag")
public class RfidTag extends IdTag implements Serializable
{
    private String code;
}


Now I want to query either Animal or Inventory for a given RfidTag.code like Animal ejb = bean.fEntityWithRfidTag(Animal.class,"myRfIdCode");

public &lt;T extends ItemWithIdTag&gt; T fOwner(Class&lt;T&gt; type, String catName)
{
    CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();
    CriteriaQuery&lt;T&gt; criteriaQuery = criteriaBuilder.createQuery(type);
    Root&lt;T&gt; from = criteriaQuery.from(type);

    Path&lt;Object&gt; path = from.join("idTag").get("code");

    CriteriaQuery&lt;T&gt; select = criteriaQuery.select(from);
    select.where(criteriaBuilder.equal(path, catName));

    TypedQuery&lt;T&gt; q = em.createQuery(select); 
    T result = (T)q.getSingleResult();}
    return result;
}


Unfortuately I get the following errror:

javax.ejb.EJBException: java.lang.IllegalArgumentException:
Unable to resolve attribute [code] against path [null]


I assume that this is related to the inheritance IdTag -> RfidTag and Animal only knows about IdTag and not the RfidTag.code. Are queries like this possible?

                
    
        Since Java 1.4 doesn't have enums I'm am doing something like this:

public class SomeClass {
     public static int SOME_VALUE_1 = 0;
     public static int SOME_VALUE_2 = 1;
     public static int SOME_VALUE_3 = 2;

     public void receiveSomeValue(int someValue) {
            // do something
     }
 }


The caller of receiveSomeValue should pass one those 3 values but he can pass any other int. 
If it were an enum the caller could only pass one valid value.

Should receiveSomeValue throw an InvalidValueException?

What are good alternatives to Java 5 enums?

                
    
        Has anyone had good experiences with any Java libraries for Graph algorithms. I've tried <a href="http://www.jgraph.com" rel="nofollow">JGraph and found it ok, and there are a lot of different ones in google. Are there any that people are actually using successfully in production code or would recommend?

To clarify, I'm not looking for a library that produces graphs/charts, I'm looking for one that helps with Graph algorithms, eg minimum spanning tree, Kruskal's algorithm Nodes, Edges, etc. Ideally one with some good algorithms/data structures in a nice Java OO API.

                
    
        I'm trying to figure out the best way to search a customer in an ArrayList by its Id number. The code below is not working; the compiler tells me that I am missing a return statement.

Customer findCustomerByid(int id){
    boolean exist=false;

    if(this.customers.isEmpty()) {
        return null;
    }

    for(int i=0;i&lt;this.customers.size();i++) {
        if(this.customers.get(i).getId() == id) {
            exist=true;
            break;
        }

        if(exist) {
            return this.customers.get(id);
        } else {
            return this.customers.get(id);
        }
    }

}

//the customer class is something like that
public class Customer {
    //attributes
    int id;
    int tel;
    String fname;
    String lname;
    String resgistrationDate;
}


                
    
        I have a Map keyed by Integer. Using JSTL, how can I access a value by its key?

Map&lt;Integer, String&gt; map = new HashMap&lt;Integer, String&gt;();
map.put(1, "One");
map.put(2, "Two");
map.put(3, "Three");


I thought this would work but it doesn't (where map is already in the request's attributes):

&lt;c:out value="${map[1]}"/&gt;


Follow up: I tracked down the problem. Apparently ${name[1]} does a map lookup with the number as a Long. I figured this out when I changed HashMap to TreeMap and received the error:

java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long


If I change my map to be:

Map&lt;Long, String&gt; map = new HashMap&lt;Long, String&gt;();
map.put(1L, "One");


then ${name[1]} returns "One". What's with that? Why does &lt;c:out&gt; treat a number as a long. Seems counterintuitive to me (as int is more commonly used than long).

So my new question is, is there a JSTL tag notation to access a map by an Integer value?

                
    
        Ok, I may resort to a tad ranting here, so let me apologize in advance, but I'm really curious if others find this pattern annoying too (and I wonder if it is a justifiable pattern)

So, after just looking at a <a href="http://stackoverflow.com/questions/90657/mocking-method-results">particular question, I noticed that almost all of the responses suggested creating an interface for injecting a mock in some test code.

I don't mind using interfaces, and sometimes they can really help in static typed languages like C# and Java but I do mind seeing interfaces for almost every class in a system (or in general being used where they aren't really needed).

I have 2 major problems with using an interface when it isn't called for:


You abstract away where the implementation is coming from. This problem has a couple consequences in an IDE, it means that when I try to browse to the source of this method being called I get taken to an interface instead of some code that I can look at and see what is going on. This bothers me a lot, but also this is a real problem to me to hide where the implementation is coming from (sometimes it can be in non-obvious locations).
It adds ANOTHER file to the system. I tend to be a minimalist in my programming if I don't really need another method, or another class, or even another file not unless that extra thing is justified (flexibility that is going to be used, or makes the design cleaner, or provides some real benefit).


Now if you are testing something, and you create an interface JUST TO ALLOW MOCKING this seems to be adding a layer of minor headaches for no real benefit. What does creating the interface do that just overriding the class won't do? What is so bad about having a mock that merely overrides some methods of the single implementation class?

I guess it should be no surprise then that I much prefer Java's default virtual methods (ie requiring a final keyword to have a method that CAN'T be overriden) to C#'s default final methods and I also tend to avoid the final keyword on methods and classes too.

So is there something to using interfaces that I am missing? Is there some hidden benefit of using an interface when you have 1 version of a class and no immediate need to create an interface?

                
    
        what is difference between 
String str = new String("abc");
and 
String str = "abc";

                
    
        I have implement a certain spring-ws service and when I sent a soap message I receive in spring webapplication 1 (running on tomcat 6.0.32):

Request:

&lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:gen="http://www.foo.com/bar/webservice/generated"&gt;
   &lt;soapenv:Header/&gt;
   &lt;soapenv:Body&gt;
      &lt;gen:GetAllPanelWSRequest/&gt;
   &lt;/soapenv:Body&gt;
&lt;/soapenv:Envelope&gt;


Response

&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"&gt;
   &lt;SOAP-ENV:Header/&gt;
   &lt;SOAP-ENV:Body&gt;
      &lt;ns2:GetAllPanelWSResponse xmlns:ns2="http://www.foo.com/bar/webservice/generated"&gt;
         &lt;ns2:PanelWS ns2:Id="5"&gt;
            &lt;ns2:name&gt;all&lt;/ns2:name&gt;
            &lt;ns2:code&gt;all&lt;/ns2:code&gt;
         &lt;/ns2:PanelWS&gt;
         &lt;ns2:PanelWS ns2:Id="9"&gt;
            &lt;ns2:name&gt;test&lt;/ns2:name&gt;
            &lt;ns2:code&gt;test1&lt;/ns2:code&gt;
         &lt;/ns2:PanelWS&gt;         
      &lt;/ns2:GetAllPanelWSResponse&gt;
   &lt;/SOAP-ENV:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;


So far no problem. From a webappliction 2 (not using spring MVC etc.) I made a function and when I run this function it works:

Main.java:

...
public class Main {
    public static void main(String[] args) {
        List&lt;PanelWS&gt; panelWSs = CallServices.getPanelWSs();
        for (PanelWS p : panelWSs) {
            System.out.println("\t" + makeString(p));
        }
    }
...


CallServices.java

public static List&lt;PanelWS&gt; getPanelWSs() {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");
        PanelClient client = (PanelClient) ctx.getBean("client");
        PanelWS panelWS = null;

        // Get all panelWS
        System.out.println("Get all panels...");
        List&lt;PanelWS&gt; panelWSs = client.getAllPanelWS();
        return panelWSs;
    }


Output:

Get all panels...
    [id=5, name=all, code=all]
    [id=9, name=test, code=test1]


So this works great and as expected. But when I want to call the function 

    &lt;%
        List&lt;PanelWS&gt; panelWSs = CallServices.getPanelWSs();
    %&gt;


within a JSP (runnning on the same tomcat server) or a simple class I get the following error:

Server:

13-mei-2011 17:57:37 com.sun.xml.internal.messaging.saaj.soap.MessageImpl saveChanges
SEVERE: SAAJ0539: Unable to get header stream in saveChanges
13-mei-2011 17:57:37 com.sun.xml.internal.messaging.saaj.soap.MessageImpl saveChanges
SEVERE: SAAJ0540: Error during saving a multipart message


Client:


  org.springframework.ws.soap.saaj.SaajSoapMessageException: Could not write message to OutputStream: Error during saving a multipart message; nested exception is com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Error during saving a multipart message


I'm using the following Java version pointing to myeclipse and tomcat (runs on):

*JDK 1.6.0_13*

Jars:


xercesImpl-2.9.1.jar
xalan-2.7.1.jar
serializer-2.7.1.jar
spring-ws-1.5.9-all.jar
spring.jar(2.5.6)   
xml-apis-1.3.04.jar   
xml-apis-ext-1.3.04.jar


Full stacktrace of client

Message:    org.springframework.ws.soap.saaj.SaajSoapMessageException: Could not write message to OutputStream: Error during saving a multipart message; nested exception is com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Error during saving a multipart message
Error ID:   #9yb3mzb7
Stack trace:    org.springframework.ws.soap.saaj.SaajSoapMessage.writeTo(SaajSoapMessage.java:169)
org.springframework.ws.client.core.WebServiceTemplate.sendRequest(WebServiceTemplate.java:580)
org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:549)
org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:502)
org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:351)
org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:345)
org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:337)
com.foo.bar.webservice.client.PanelMGMClientImpl.getAllPanelWS(PanelMGMClientImpl.java:22)
com.foo.bar.webservice.client.CallServices.getPanelWSs(CallServices.java:22)
org.apache.jsp.workspace.aclusers_jsp._jspService(aclusers_jsp.java:786)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:386)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)


Fullstacktrace of server
**

**SEVERE: Servlet.service() for servlet spring-ws threw exception
java.io.IOException: org.apache.xml.serializer.ToXMLSAXHandler cannot be cast to org.apache.xml.serializer.SerializationHandler
    at com.sun.xml.internal.messaging.saaj.soap.impl.EnvelopeImpl.output(EnvelopeImpl.java:298)
    at com.sun.xml.internal.messaging.saaj.soap.impl.EnvelopeImpl.output(EnvelopeImpl.java:309)
    at com.sun.xml.internal.messaging.saaj.soap.SOAPPartImpl.getContentAsStream(SOAPPartImpl.java:305)
    at com.sun.xml.internal.messaging.saaj.soap.MessageImpl.getHeaderBytes(MessageImpl.java:947)
    at com.sun.xml.internal.messaging.saaj.soap.MessageImpl.saveChanges(MessageImpl.java:1098)
    at org.springframework.ws.soap.saaj.Saaj13Implementation.writeTo(Saaj13Implementation.java:268)
    at org.springframework.ws.soap.saaj.SaajSoapMessage.writeTo(SaajSoapMessage.java:165)
    at org.springframework.ws.transport.AbstractWebServiceConnection.send(AbstractWebServiceConnection.java:45)
    at org.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:97)
    at org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:57)
    at org.springframework.ws.transport.http.MessageDispatcherServlet.doService(MessageDispatcherServlet.java:230)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.foo.bar.support.gzip.CompressionFilter.doFilter(CompressionFilter.java:30)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:168)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:864)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1665)
    at java.lang.Thread.run(Thread.java:619)
16-mei-2011 14:20:12 com.sun.xml.internal.messaging.saaj.soap.EnvelopeFactory createEnvelope
SEVERE: SAAJ0511: Unable to create envelope from given source**


**

hopefully this is enough information to solve the problem. I found some messages and bugs the pointing to the fact that I need to delete some Jars (xalan,xercesImpl and serializer) from the projects and add these jars to the jdk\lib\endorsed\ folder and add to tomcat the argument: -Djava.endorsed.dirs=. This works but I can't do this because the applications is running on several servers already.

Thx in advance

Alternative solution

Solved It for now while using the Apache CXF on the client. And spring-ws 1.5.9 on the server... apparently spring-ws sucks with jdk > 1.5

                
    
        I want to limit my users to a directory and its sub directories but the "Parent Directory" button allows them to browse to an arbitraty directory.

How should I go about doing that?

                
    
        I'm having trouble determining a way to parse a given text file.

Here is an entry in the file:

type = "book"
callnumber = "1"
authors = "a"
title = "t"
publisher = "p"
year = "2023"


each entry is separated by a line of whitespace (newline character).

so i have these variables (type, callnumber, authors, title....), and need to read this text and determine what values to set them to. For example, when i read the line "callnumber = 1", then I need set that variable to 1. 

This is what I have so far. I read in a line at a time, so type = "book" for example, and then I split that line into an array of strings, with the delimiter being ", so the array would contain type = and book .
Now my problem comes in going further from there. I figured I could cycle through each string in the array, character by character, until I hit whitespace. So i would have type, but I don't have any data yet to store in type, and the grab will give me book (ignoring the = and whitespace), but how can I attribute book to type?

In summary, I'm looking for a way to  parse a text file line by line, and assign variables values, based on the words I find.

Thanks.

                
    
        I have a method that's about 10 lines of code.  I want to create more methods that do the exact same thing except for a calculation that's going to change one line of code.  This is a perfect application for passing in a function pointer to replace that one line, but Java doesn't have function pointers.  What's my best alternative?

                
    
        I'm a little confused as to how the IOC works in spring.

Say I have a service class called UserServiceImpl that implements UserService interface.

How would this be auto-wired?

And in my Controllers action, how would I instantiate an instance of this service?

Would I just do:

UserService userService = new UserServiceImpl();


                
    
        Is it possible to use a DB sequence for some column that is not the identifier/is not part of a composite identifier? 

I'm using hibernate as jpa provider, and I have a table that has some columns that are generated values (using a sequence), although they are not part of the identifier.

What I want is to use a sequence to create a new value for an entity, where the column for the sequence is NOT (part of) the primary key:

@Entity
@Table(name = "MyTable")
public class MyEntity {

    //...
    @Id //... etc
    public Long getId() {
        return id;
    }

   //note NO @Id here! but this doesn't work...
    @GeneratedValue(strategy = GenerationType.AUTO, generator = "myGen")
    @SequenceGenerator(name = "myGen", sequenceName = "MY_SEQUENCE")
    @Column(name = "SEQ_VAL", unique = false, nullable = false, insertable = true, updatable = true)
    public Long getMySequencedValue(){
      return myVal;
    }

}


Then when I do this:

em.persist(new MyEntity());


the id will be generated, but the mySequenceVal property will be also generated by my JPA provider.

Just to make things clear: I want Hibernate to generate the value for the mySequencedValue property. I know Hibernate can handle database-generated values, but I don't want to use a trigger or any other thing other than Hibernate itself to generate the value for my property. If Hibernate can generate values for primary keys, why can't it generate for a simple property?

                
    
        I have a table in Oracle where column SC_CUR_CODE is CHAR(3)

When I do:

    Query q2 = em.createNativeQuery("select sc_cur_code, sc_amount from sector_costs");

    q2.setMaxResults(10);

    List&lt;Object[]&gt; rs2 = q2.getResultList();

    for (Object[] o : rs2) {
        System.out.println("&gt;&gt;&gt; cur=" + o[0]);
    }


I see cur=E and cur=U instead of cur=EUR and cur=USD

o[0] is a java.lang.Character

How can I get the full value EUR and USD ?

                
    
        Can somebody suggest an easy way to get a reference to a file as a String/InputStream/File/etc type object in a junit test class?  Obviously I could paste the file (xml in this case) in as a giant String or read it in as a file but is there a shortcut specific to Junit like this?

public class MyTestClass{

@Resource(path="something.xml")
File myTestFile;

@Test
public void toSomeTest(){
...
}

}


                
    
        Is there a standard idiom for comparing version numbers?  I can't just use a straight String compareTo because I don't know yet what the maximum number of point releases there will be.  I need to compare the versions and have the following hold true:

1.0 &lt; 1.1
1.0.1 &lt; 1.1
1.9 &lt; 1.10


                
    
        I'm getting a slight distortion (sounds like buzzing) in the background when I run the following code. Because of its subtle nature it makes believe there is some sort of aliasing going on with the byte casting.

AudioFormat = PCM_SIGNED 44100.0 Hz, 16 bit, stereo, 4 bytes/frame, big-endian

Note: code assumes (for now) that the data is in big endian.

public static void playFreq(AudioFormat audioFormat, double frequency, SourceDataLine sourceDataLine)
{
	System.out.println(audioFormat);
	double sampleRate = audioFormat.getSampleRate();
	int sampleSizeInBytes = audioFormat.getSampleSizeInBits() / 8;
	int channels = audioFormat.getChannels();

	byte audioBuffer[] = new byte[(int)Math.pow(2.0, 19.0) * channels * sampleSizeInBytes];

	for ( int i = 0; i &lt; audioBuffer.length; i+=sampleSizeInBytes*channels )
	{
		int wave = (int) (127.0 * Math.sin( 2.0 * Math.PI * frequency * i / (sampleRate * sampleSizeInBytes * channels) )  );

		//wave = (wave &gt; 0 ? 127 : -127);

		if ( channels == 1 )
		{
			if ( sampleSizeInBytes == 1 )
			{
				audioBuffer[i] = (byte) (wave);
			}

			else if ( sampleSizeInBytes == 2 )
			{
				audioBuffer[i] = (byte) (wave);
				audioBuffer[i+1] = (byte)(wave &gt;&gt;&gt; 8);
			}
		}

		else if ( channels == 2 )
		{
			if ( sampleSizeInBytes == 1 )
			{
				audioBuffer[i] = (byte) (wave);
				audioBuffer[i+1] = (byte) (wave);
			}

			else if ( sampleSizeInBytes == 2 )
			{
				audioBuffer[i] = (byte) (wave);
				audioBuffer[i+1] = (byte)(wave &gt;&gt;&gt; 8);

				audioBuffer[i+2] = (byte) (wave);
				audioBuffer[i+3] = (byte)(wave &gt;&gt;&gt; 8);
			}
		}
	}

	sourceDataLine.write(audioBuffer, 0, audioBuffer.length);
}


                
    
        I have 2 swing classes which extends JFrame. Both have show() method in there constructor. From ClassOne i called ClassTwo like new ClassTwo() on button click event. But if i press the button again new window for ClassTwo is opened. So how can i stop opening of ClassTwo window if one ClassTwo window is opened ?

Edit

now this problem is solved but now when i first open ClassTwo window it shows one window. Then after closing it when i again open ClassTwo window it opens two window and this count keep on increamenting. Why this is happening?

EDIT 2

I found that its not swing problem but its problem from MultiUsreChat class of Samck API. So anyone who have worked on it help me.

the code in ClassOne is:

if(!winList.contains(room_jid)){
    new ClassTwo(room_jid,....);
    winList.add(room_jid);
}


and in ClassTwo is:

public ClassTwo(....){
......
    this.muc = new MultiUserChat(connection, room_jid);
    if(!muc.isJoined())
        muc.join(this.user_id);      //---- This line opens previously closed window.
.....

    if(!isVisible())
       show();

}


Edit 3

constructor of classone

public ClassOne(){
  JButton btn = new JButton("Open");
  btn.addActionListener(new ActionListener(){
     public void actionPerformed(ActionEvent e){
       if(!winList.contains(room_jid)){
           new ClassTwo(room_jid,....);
            winList.add(room_jid);
       }
     }
  });
}


                
    
        I have the following code: 

DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(xmlFile);


How can I get it to parse XML contained within a String instead of a file?

                
    
        What I am trying to do is read a .java file, and pick out all of the identifiers and store them in a list.  My problem is with the .split() method.  If you run this code the way it is, you will get ArrayOutOfBounds, but if you change the delimiter from "." to anything else, the code works.  But I need to lines parsed by "." so is there another way I could accomplish this?

import java.io.BufferedReader;

import java.io.FileNotFoundException;

import java.io.FileReader;

import java.io.IOException;

import java.util.*;



public class MyHash {

private static String[] reserved = new String[100];

private static List list = new LinkedList();

private static List list2 = new LinkedList();

public static void main (String args[]){
  Hashtable hashtable  = new Hashtable(997);
  makeReserved();
  readFile();                                                 
  String line;
  ListIterator itr = list.listIterator();
  int listIndex = 0;
  while (listIndex &lt; list.size()) {                                       

        if (itr.hasNext()){
          line = itr.next().toString();
          //PROBLEM IS HERE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
          String[] words = line.split(".");  //CHANGE THIS AND IT WILL WORK
          System.out.println(words[0]);      //TESTING TO SEE IF IT WORKED
        }
        listIndex++;
        }
  }









public static void readFile() {
    String text;
    String[] words;
    BufferedReader in = null; 
    try {
        in = new BufferedReader(new FileReader("MyHash.java")); //NAME OF INPUT FILE


    } catch (FileNotFoundException ex) {
        Logger.getLogger(MyHash.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        while ((text = in.readLine()) != null){
        text = text.trim();
        words = text.split("\\s+");
        for (int i = 0; i &lt; words.length; i++){
            list.add(words[i]);
        }
        for (int j = 0; j &lt; reserved.length; j++){
            if (list.contains(reserved[j])){
                list.remove(reserved[j]);
            }
        }


    }

    } catch (IOException ex) {
        Logger.getLogger(MyHash.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        in.close();
    } catch (IOException ex) {
        Logger.getLogger(MyHash.class.getName()).log(Level.SEVERE, null, ex);
    }

}



public static int keyIt (int x) {
   int key = x % 997;
   return key;
}

public static int horner (String word){
    int length = word.length();
    char[] letters = new char[length];

    for (int i = 0; i &lt; length; i++){
        letters[i]=word.charAt(i);
    }

    char[] alphabet = new char[26];
    String abc = "abcdefghijklmnopqrstuvwxyz";

    for (int i = 0; i &lt; 26; i++){
        alphabet[i]=abc.charAt(i);
    }

    int[] numbers = new int[length];
    int place = 0;
    for (int i = 0; i &lt; length; i++){
        for (int j = 0; j &lt; 26; j++){
            if (alphabet[j]==letters[i]){
                numbers[place]=j+1;
                place++;

            }
        }
    }

    int hornered = numbers[0] * 32;

    for (int i = 1; i &lt; numbers.length; i++){

        hornered += numbers[i];
        if (i == numbers.length -1){
            return hornered;
        }
        hornered = hornered % 997;
        hornered *= 32;
    }
    return hornered;
}

public static String[] makeReserved (){
    reserved[0] = "abstract";
    reserved[1] = "assert";
    reserved[2] = "boolean";
    reserved[3] = "break";
    reserved[4] = "byte";
    reserved[5] = "case";
    reserved[6] = "catch";
    reserved[7] = "char";
    reserved[8] = "class";
    reserved[9] = "const";
    reserved[10] = "continue";
    reserved[11] = "default";
    reserved[12] = "do";
    reserved[13] = "double";
    reserved[14] = "else";
    reserved[15] = "enum";
    reserved[16] = "extends";
    reserved[17] = "false";
    reserved[18] = "final";
    reserved[19] = "finally";
    reserved[20] = "float";
    reserved[21] = "for";
    reserved[22] = "goto";
    reserved[23] = "if";
    reserved[24] = "implements";
    reserved[25] = "import";
    reserved[26] = "instanceof";
    reserved[27] = "int";
    reserved[28] = "interface";
    reserved[29] = "long";
    reserved[30] = "native";
    reserved[31] = "new";
    reserved[32] = "null";
    reserved[33] = "package";
    reserved[34] = "private";
    reserved[35] = "protected";
    reserved[36] = "public";
    reserved[37] = "return";
    reserved[38] = "short";
    reserved[39] = "static";
    reserved[40] = "strictfp";
    reserved[41] = "super";
    reserved[42] = "switch";
    reserved[43] = "synchronize";
    reserved[44] = "this";
    reserved[45] = "throw";
    reserved[46] = "throws";
    reserved[47] = "trasient";
    reserved[48] = "true";
    reserved[49] = "try";
    reserved[50] = "void";
    reserved[51] = "volatile";
    reserved[52] = "while";
    reserved[53] = "=";
    reserved[54] = "==";
    reserved[55] = "!=";
    reserved[56] = "+";
    reserved[57] = "-";
    reserved[58] = "*";
    reserved[59] = "/";
    reserved[60] = "{";
    reserved[61] = "}";




    return reserved;
}


}

                
    
        I'm trying to build a Servlet that calls a JSP page similar to the following:

public void doGet(HttpServletRequest req, HttpServletResponse resp)
		throws IOException, ServletException {
	req.getRequestDispatcher("/WEB-INF/main.jsp").forward(req, resp);
}


I need this Servlet to respond to the domain's root (eg: <a href="http://example.com/" rel="nofollow">http://example.com/) so I'm using the following mapping in the web.xml:

&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;MainServlet&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;


The problem I'm having is that this matches EVERYTHING, so when the dispatcher forwards to "/WEB-INF/main.jsp" this matches the url-pattern so the Servlet gets run again. This results in a loop that runs until it dies with a <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/StackOverflowError.html" rel="nofollow">java.lang.StackOverflowError.

How can I match the root without preventing other scripts from being runnable?

                
    
        Is there there any way to tell JUnit to run a specific test case multiple times with different data continuously before going on to the next test case?

                
    
        Is it generally considered bad practice to provide Iterator implementations that are "infinite"; i.e. where calls to hasNext() always(*) return true?

Typically I'd say "yes" because the calling code could behave erratically, but in the below implementation hasNext() will return true unless the caller removes all elements from the List that the iterator was initialised with; i.e. there is a termination condition.  Do you think this is a legitimate use of Iterator?  It doesn't seem to violate the contract although I suppose one could argue it's unintuitive.

public class CyclicIterator&lt;T&gt; implements Iterator&lt;T&gt; {
  private final List&lt;T&gt; l;
  private Iterator&lt;T&gt; it;

  public CyclicIterator&lt;T&gt;(List&lt;T&gt; l) {
    this.l = l;
    this.it = l.iterator();
  }

  public boolean hasNext() {
    return !l.isEmpty();
  }

  public T next() {
    T ret;

    if (!hasNext()) {
      throw new NoSuchElementException();
    } else if (it.hasNext()) {
      ret = it.next();
    } else {
      it = l.iterator();
      ret = it.next();
    }

    return ret;
  }

  public void remove() {
    it.remove();
  }
}


(Pedantic) EDIT

Some people have commented how an Iterator could be used to generate values from an unbounded sequence such as the Fibonacci sequence.  However, the Java Iterator documentation states that an Iterator is:


  An iterator over a collection.


Now you could argue that the Fibonacci sequence is an infinite collection but in Java I would equate collection with the java.util.Collection interface, which offers methods such as size() implying that a collection must be bounded.  Therefore, is it legitimate to use Iterator as a generator of values from an unbounded sequence?

                
    
        I am trying to integrate with the new GWT Editor framework of GWT 2.1.0. I also want to add my validation checks into the framework. However, I am struggling to find a decent example how to do this.

For the moment I have the following code:

&lt;!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent"&gt;
&lt;ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui" xmlns:e="urn:import:com.google.gwt.editor.ui.client"&gt;
    &lt;ui:with type="be.credoc.iov.webapp.client.MessageConstants"
        field="msg" /&gt;
    &lt;g:HTMLPanel&gt;
        &lt;e:ValueBoxEditorDecorator ui:field="personalReference"&gt;
            &lt;e:valuebox&gt;
                &lt;g:TextBox /&gt;
            &lt;/e:valuebox&gt;
        &lt;/e:ValueBoxEditorDecorator&gt;
    &lt;/g:HTMLPanel&gt;
&lt;/ui:UiBinder&gt; 


And for my editor:

public class GarageEditor extends Composite implements Editor&lt;Garage&gt; {

    @UiField
    ValueBoxEditorDecorator&lt;String&gt; personalReference;

    interface GarageEditorUiBinder extends UiBinder&lt;Widget, GarageEditor&gt; {
    }

    private static GarageEditorUiBinder uiBinder = GWT.create(GarageEditorUiBinder.class);

    public GarageEditor() {
        initWidget(uiBinder.createAndBindUi(this));
    }

}


On what point do I have to call my validator and how do I integrate with it?

Update:

I am actually looking for a way to retrieve a map with as key the property path, and as value the editor. There is a path field on a delegate, but this is not the path within the edited object, but the path in the editor class.

Does anybody know if it is possible to do something like this?

                
    
        So, in Java, the first line of your constructor HAS to be a call to super... be it implicitly calling super(), or explicitly calling another constructor.  What I want to know is, why can't I put a try block around that?

My specific case is that I have a mock class for a test.  There is no default constructor, but I want one to make the tests simpler to read.  I also want to wrap the exceptions thrown from the constructor into a RuntimeException.

So, what I want to do is effectively this:

public class MyClassMock extends MyClass {
    public MyClassMock() {
        try {
            super(0);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    // Mocked methods
}


But Java complains that super isn't the first statement.

My workaround:

public class MyClassMock extends MyClass {
    public static MyClassMock construct() {
        try {
            return new MyClassMock();
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    public MyClassMock() throws Exception {
        super(0);
    }

    // Mocked methods
}


Is this the best workaround?  Why doesn't Java let me do the former?
                
    
        I thought hibernate takes into consideration only class variables that are annotated with @Column.  But strangely today when I added a variable (that is not mapped to any column, just a variable i need in the class), it is trying to include that variable in the select statement as a column name and throws the error - 

Unknown column 'team1_.agencyName' in 'field list'

My class - 

@Entity
@Table(name="team")
public class Team extends BaseObject implements Serializable {

@Id  @GeneratedValue(strategy=GenerationType.AUTO)
private Long id;

@Column(length=50)
private String name;

@Column(length=10)
private String code;

@Column(name = "agency_id")
private Long agencyId;

private String agencyName; //note: not annotated.

}


FYI...I use the above class in another class with many to many mapping

@ManyToMany(fetch = FetchType.EAGER) 
@JoinTable(
        name="user_team",
        joinColumns = { @JoinColumn( name="user_id") },
        inverseJoinColumns = @JoinColumn( name="team_id")
)    
public Set&lt;Team&gt; getTeams() {
    return teams;
}


Why is this happening?!

                
    
        Is it possible to have a JSF managed bean be automatically created?

For example I have several session scoped beans. Sometimes it becomes necessary to access these instances in code (rather than just in JSF) this is done by:

PageBean pageBean = (PageBean) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("pages");


However if no page has already been visited which calls to '#{pages}' this resolves to null ... is there anyway to get JSF to create a bean when the scope 'begins'? So in this case ideally when a user session begins the 'pages' bean would be instantiated in the session immediately?

                
    
        I'm wondering if I'm missing something about Java Beans. I like my objects to do as much initialization in the constructor as possible and have a minimum number of mutators. Beans seem to go directly against this and generally feel clunky. What capabilities am I missing out on by not building my objects as Beans?

                
    
        How can I configure JPA/Hibernate to store a date/time in the database as UTC (GMT) time zone? Consider this annotated JPA entity:

public class Event {
    @Id
    public int id;

    @Temporal(TemporalType.TIMESTAMP)
    public java.util.Date date;
}


If the date is 2008-Feb-03 9:30am Pacific Standard Time (PST), then I want the UTC time of 2008-Feb-03 5:30pm stored in the database. Likewise, when the date is retrieved from the database, I want it interpreted as UTC. So in this case 530pm is 530pm UTC. When it's displayed it will be formatted as 9:30am PST.

                
    
        Is it possible to send an email from my Java application using a Gmail account?  I have it configured to send using my company mail server, but that's not going to cut it when I distribute the application.  Answers using Hotmail or Yahoo mail are also acceptable.

                
    
        How would you initialise a static Map in Java?

Method one: Static initialiser
Method two: instance initialiser (anonymous subclass)
or
some other method?

What are the pros and cons of each?

Here is an example illustrating two methods:

import java.util.HashMap;
import java.util.Map;

public class Test {
    private static final Map&lt;Integer, String&gt; myMap = new HashMap&lt;Integer, String&gt;();
    static {
        myMap.put(1, "one");
        myMap.put(2, "two");
    }

    private static final Map&lt;Integer, String&gt; myMap2 = new HashMap&lt;Integer, String&gt;(){
        {
            put(1, "one");
            put(2, "two");
        }
    };
}


                
    
        I am aware that you can lock an object in c# using lock but can you give up the lock and wait for something else to notify you that it's changed like you can in java with wait and notify?

It seems to me that synchronised and lock in java and c# respectively are synonomous.

                
    
        As a follow up to a <a href="http://stackoverflow.com/questions/151590/java-how-do-detect-a-remote-side-socket-close">recent question, I wonder why it is impossible in Java, without attempting reading/writing on a TCP socket, to detect that the socket has been gracefully closed by the peer? This seems to be the case regardless of whether one uses the pre-NIO Socket or the NIO SocketChannel.

When a peer gracefully closes a TCP connection, the TCP stacks on both sides of the connection know about the fact. The server-side (the one that initiates the shutdown) ends up in state FIN_WAIT2, whereas the client-side (the one that does not explicitly respond to the shutdown) ends up in state CLOSE_WAIT. Why isn't there a method in Socket or SocketChannel that can query the TCP stack to see whether the underlying TCP connection has been terminated? Is it that the TCP stack doesn't provide such status information? Or is it a design decision to avoid a costly call into the kernel?

With the help of the users who have already posted some answers to this question, I think I see where the issue might be coming from. The side that doesn't explicitly close the connection ends up in TCP state CLOSE_WAIT meaning that the connection is in the process of shutting down and waits for the side to issue its own CLOSE operation. I suppose it's fair enough that isConnected returns true and isClosed returns false, but why isn't there something like isClosing?

Below are the test classes that use pre-NIO sockets. But identical results are obtained using NIO.

import java.net.ServerSocket;
import java.net.Socket;

public class MyServer {
  public static void main(String[] args) throws Exception {
    final ServerSocket ss = new ServerSocket(12345);
    final Socket cs = ss.accept();
    System.out.println("Accepted connection");
    Thread.sleep(5000);
    cs.close();
    System.out.println("Closed connection");
    ss.close();
    Thread.sleep(100000);
  }
}


import java.net.Socket;

public class MyClient {
  public static void main(String[] args) throws Exception {
    final Socket s = new Socket("localhost", 12345);
    for (int i = 0; i &lt; 10; i++) {
      System.out.println("connected: " + s.isConnected() + 
        ", closed: " + s.isClosed());
      Thread.sleep(1000);
    }
    Thread.sleep(100000);
  }
}


When the test client connects to the test server the output remains unchanged even after the server initiates the shutdown of the connection:

connected: true, closed: false
connected: true, closed: false
...


                
    
        In a recent interview I was asked to write the below program.
Find out the character whose frequency is minimum in the given String ?
So I tried by iterating through the string by using charAt and storing the character as key in a HashMap and the number of occurences as its value.
Now Again I have to iterate on the Map to find the lowest element.

Is there a more efficient way to do it as obviously the above one is too intensive i guess.

Update and Another Solution

After some thought process  and answers I think the best time that this can be is O(n).
In the first iteration we will have to iterate through the String character by character and then store their frequency in an Array at the specific position(character is an int) and same time have two temporary variables which maintain the least count and the corresponding character.So when I go to the next character and store its frequency in arr[char] = arr[char]+1;At the same time I will check if the temp varible has a value greater than this value,if yes then the temp varible will be this value and also the char will be this one.In this way i suppose we dont need a second iteration to find the smallest and also no sorting is required I guess 

.... Wat say  ? Or any more solutions

                
    
        In Java, is there a way to have a window that is "Always on top" regardless if the user switches focus to another application?  I've searched the web, and all of the solutions lean to some sort of JNI interface with native bindings.  Truly this can't be the only way to do it?.. or is it?

                
    
        In this application we are developing, we noticed that a view was particularly slow. I profiled the view and noticed that there was one query executed by hibernate which took 10 seconds even if there only were two object in the database to fetch. All OneToMany and ManyToMany relations were lazy so that wasn't the problem. When inspecting the actual SQL being executed, I noticed that there were over 80 joins in the query. 

Further inspecting the issue, I noticed that the problem was caused by the deep hierarchy of OneToOne and ManyToOne relations between entity classes. So, I thought, I'll just make them fetched lazy, that should solve the problem. But annotating either @OneToOne(fetch=FetchType.LAZY) or @ManyToOne(fetch=FetchType.LAZY) doesn't seem to work. Either I get an exception or then they are not actually replaced with a proxy object and thus being lazy.

Any ideas how I'll get this to work? Note that I do not use the persistence.xml to define relations or configuration details, everything is done in java code.

                
    
        How can i get request URL from JSP. 

If i use following code within JSP i get - 

System.out.println("servlet path= " + request.getServletPath());
System.out.println("request URL= " + request.getRequestURL());
System.out.println("request URI= " + request.getRequestURI());


I get path to view(jsp) with jsp prefix. But i want to get URL from browser, that user type in address string. I can get valid URL in controller, that return jsp, then add it to view and get it within JSP. But prboably there are more elegant way to get valid URL within JSP ?

                
    
        The problem: Consder the following floats[]:

d[i] =     1.7 -0.3  2.1  0.5


What I want is an array of int[] that represents the order of the original array with indices.

s[i] =       1    3    0    2
d[s[i]] = -0.3  0.5  1.7  2.1


Of course it could be done with a custom comparator, a sorted set of custom objects, or by simply sorting the array and then searching for the indices in the original array (shudder).

What I am in fact looking for is the equivalent for the second return argument of <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/index.html?/access/helpdesk/help/techdoc/ref/sort.html" rel="nofollow">Matlab's sort function.

Is there an easy way to do that (&lt;5 LOC)? May there be a solution that does not need to allocate a new object for each element?

<hr />

Update:

Thanks for your responses. Unfortunately, none of what has been proposed so far resembles the simple and efficient solution I was hoping for. I therefore openened a thread in the JDK feedback forum, proposing the addition of a new class-library function to address the issue. Lets see what Sun/Oracle thinks about the issue.

<a href="http://forums.java.net/jive/thread.jspa?threadID=62657&amp;tstart=0" rel="nofollow">http://forums.java.net/jive/thread.jspa?threadID=62657&amp;tstart=0

                
    
        i am having the list myEmpls 

List myEmpls = new ArrayList();


In this list i have added used defined objects.

LogConf e = getLogs(el);
    //add it to list
 myEmpls.add(e);


Now how to iterate the list of objects and get the values from this objects.
How to do this?

                
    
        I am trying to generate a random number with Java, but random in a specific range. For example, my range is 5-10, meaning that 5 is the smallest possible value the random number can take, and 10 is the biggest. Any other number in between these numbers is possible to be a value, too. 

In Java, there is a function random() in the Math class, which returns a double value between 0.0 and 1.0. 
In the class Random there is a function nextInt(int n), which returns a random value in the range of 0 (inclusive) and n (exclusive).
I couldn't find a method, which returns a random value between two numbers.

I have tried the following things, but I still have problems:
(minimum and maximum are the smallest and biggest numbers).

Solution 1 :

randomNum = minimum + (int)(Math.random()*maximum);


problem: randomNum takes is assinged values numbers bigger that maximum

Solution 2 : 

Random rn = new Random();
int n = maximum - minimum + 1;
int i = rn.nextInt() % n;
randomNum =  minimum + i;


problem: randomNum takes is assigned values smaller than minimum.

Could you suggest how to solve my problem, or point me to some references? I have tried also browsing through the archive, and found:


<a href="http://stackoverflow.com/questions/137783/given-a-function-which-produces-a-random-integer-in-the-range-1-to-5-write-a-fu">http://stackoverflow.com/questions/137783/given-a-function-which-produces-a-random-integer-in-the-range-1-to-5-write-a-fu
<a href="http://stackoverflow.com/questions/288739/generate-random-numbers-uniformly-over-entire-range">http://stackoverflow.com/questions/288739/generate-random-numbers-uniformly-over-entire-range


but I couldn't solve the problem. 

Thank you.

                
